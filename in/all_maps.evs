#memory(
    string_key(0x0000)..string_key(0x232b), // all string keys
    function_key(0x0000)..function_key(0x232b), // TODO: all function keys?

    0x300000..0x3fffff, // extension

    <0x2272>
)
#include("in/core.evs")

#patch(
    // "void_maps",

    "skip_intro",
    // "brian",
    // "camera_hack",
    // "free_graveyard_ids",
    // "save_file_growth",

    // asm
    // "debug_menu", // uses 0x3f0000…???
    "_hook_input", // 0x3f0000…0x310000
        "hotkeys", // uses 0x3f00000…???
        // "room_timer", // uses 0x300000…???
    // "_hook_trigger",
)

// hotkeys

@install()
@inject(ADDRESS.HOTKEY_START)
fun hotkey_start() {
    subtext(string("Start[END]"));
}
@install()
@inject(ADDRESS.HOTKEY_START_L)
fun hotkey_start_l() {
    subtext(string("Start+L[END]"));
}
@install()
@inject(ADDRESS.HOTKEY_START_R)
fun hotkey_start_r() {
    subtext(string("Start+R[END]"));

    attribute(BOY, NO_CLIP, True);
}

// maps

@install(ADDRESS.INTRO_FIRST_CODE_EXECUTED)
fun intro_skip() {
    // act 1
    // map_transition(raptors, south, DIRECTION.NONE);
    // map_transition(thraxx, south, DIRECTION.NONE);
    // map_transition(graveyard, south, DIRECTION.NONE);
    // map_transition(salabog, south, DIRECTION.NONE);
    // map_transition(dungeon_volcano, north_1, DIRECTION.NONE);
    // map_transition(pipe_rooms, pipe_west, DIRECTION.NONE);
    // map_transition(pipe_maze, pipe_east, DIRECTION.NONE);
    // map_transition(magmar, south, DIRECTION.NONE);

    // act 2
    // map_transition(vigor, south, DIRECTION.NONE);
    // map_transition(megataur, south, DIRECTION.NONE);
    // map_transition(rimsala, south, DIRECTION.NONE);
    // map_transition(aquagoth, south, DIRECTION.NONE);

    // act 3
    // map_transition(footknight, east, DIRECTION.NONE);
    // map_transition(dark_forest_room_3, north, DIRECTION.NONE);
    // map_transition(bad_boys, east, DIRECTION.NONE);
    // map_transition(timberdrake, south, DIRECTION.NONE);
    // map_transition(verminator, south, DIRECTION.NONE);
    // map_transition(sterling, south, DIRECTION.NONE);
    // map_transition(mungola, east_2, DIRECTION.NONE);

    // act 4
    // map_transition(face, south, DIRECTION.NONE);
    // map_transition(carltron, center, DIRECTION.NONE);

    // misc
    // map_transition(brians_room, center, DIRECTION.NONE);

    map_transition(village, hut_3, DIRECTION.NONE);
}

// act 1

map flowers(0x38) {
    enum entrance {
        north = entrance(0x62, 0x0b, DIRECTION.SOUTH),
        west = entrance(0x04, 0x1f, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
        b_trigger_25 = @install() fun test() {
            subtext(string("b? 25 [END]"));
        },
        b_trigger_26 = @install() fun test() {
            subtext(string("b? 26 [END]"));
        },
        b_trigger_27 = @install() fun test() {
            subtext(string("b? 27 [END]"));
        },
        b_trigger_28 = @install() fun test() {
            subtext(string("b? 28 [END]"));
        },
        b_trigger_29 = @install() fun test() {
            subtext(string("b? 29 [END]"));
        },

        b_trigger_30 = @install() fun test() {
            subtext(string("b? 30 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map strongheart_inside(0x34) {
    enum entrance {
        door = entrance(0x12, 0x23, DIRECTION.NORTH)
    }

    enum stepon_trigger {
        door = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        }
    }

    enum b_trigger {
        gourd_1 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        gourd_2 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        gourd_3 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
    }

    fun trigger_enter() {
        // object[0x00] = 0x01; // unload gourd_1
        // object[0x02] = 0x01; // unload gourd_2
        // object[0x01] = 0x01; // unload gourd_3

        fade_in();
    }
};

map raptors(0x5c) {
    enum entrance {
        north = entrance(0x1b, 0x03, DIRECTION.SOUTH),
        south = entrance(0x1d, 0x33, DIRECTION.NORTH),

        left = entrance(0x15, 0x1c, DIRECTION.NONE),
        center = entrance(0x1e, 0x21, DIRECTION.NONE),
        right = entrance(0x2a, 0x23, DIRECTION.NONE)
    }

    enum stepon_trigger {
        exit_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));
            map_transition(raptors, south, DIRECTION.NORTH);
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 1 [END]"));
            map_transition(raptors, north, DIRECTION.SOUTH);
        },
        center = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        }
    }

    fun close_exits(close) {
        if(close) {
            object[0x04] = 0x04;
        } else {
            object[0x05] = 0x04;
        }
    }

    fun trigger_enter() {
        close_exits(False);

        fade_in();
    }
};

map village(0x25) {
    enum entrance {
        north = entrance(0x59, 0x0d, SOUTH),
        east = entrance(0x7d, 0x65, WEST),
        south = entrance(0x59, 0x73, NORTH),
        west = entrance(0x01, 0x2f, EAST),

        hut_1 = entrance(0x0f, 0x1b, SOUTH),
        hut_2 = entrance(0x33, 0x2d, SOUTH),
        hut_3 = entrance(0x53, 0x2f, SOUTH),
        hut_4 = entrance(0x65, 0x36, SOUTH),
        hut_5 = entrance(0x6f, 0x49, SOUTH),
        hut_6 = entrance(0x45, 0x53, SOUTH),
        hut_7 = entrance(0x25, 0x5b, SOUTH),
        hut_8 = entrance(0x21, 0x3b, SOUTH),
    }

    enum stepon_trigger {
        exit_hut_1 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_hut_2 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_hut_3 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_hut_4 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_hut_5 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_hut_6 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        exit_hut_7 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        exit_hut8 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        guard_east = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        exit_south = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },
    }

    fun trigger_enter() {
        // object[0x00] = 0x01; // open gourd
        // … sniff spots?
        // object[0x11] = 0x01; // ignite fire

        fade_in();
    }
};

map defend(0x26) {
    enum entrance {
        east = entrance(0x26, 0x13, DIRECTION.WEST),
    }

    enum stepon_trigger {
        exit_east = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map jungle_firepit(0x36) {
    enum entrance {
        south = entrance(0x17, 0x2c, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map bugmuck(0x67) {
    enum entrance {
        north_1 = entrance(0x0b, 0x01, DIRECTION.SOUTH),
        north_2 = entrance(0x1b, 0x01, DIRECTION.SOUTH),
        cave = entrance(0x24, 0x4c, DIRECTION.SOUTH),

        dungeon_south = entrance(0x7c, 0x75, DIRECTION.SOUTH),
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        stepon_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        stepon_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        stepon_4 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        stepon_5 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        stepon_6 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        stepon_8 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        stepon_9 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        stepon_10 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        stepon_11 = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        stepon_12 = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        // TODO: 2a
    }

    fun trigger_enter() {
        close_exits(False);

        fade_in();
    }
};

map thraxx(0x18) {
    enum entrance {
        north = entrance(0x18, 0x10, DIRECTION.SOUTH),
        south = entrance(0x17, 0x3f, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));

            map_transition(thraxx, south, DIRECTION.NORTH);
        },
        trigger_boss = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 2 [END]"));
            map_transition(thraxx, north, DIRECTION.SOUTH);
        }
    }

    enum b_trigger {
        cocoon = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        rip_cage = @install() fun test() {
            subtext(string("b? 1 [END]"));
        }
    }

    fun show_thraxx(show) {
        if(show) {
            add_enemy(ENEMY.THRAXX_LEFT_ARM, 0x13, 0x0e);
            add_enemy(ENEMY.THRAXX_RIGHT_ARM, 0x1d, 0x0d);

            object[0x00] = 0x02;
            object[0x02] = 0x01;
            object[0x03] = 0x02;
        } else {
            object[0x00] = 0x02;
            object[0x01] = 0x02;
            object[0x02] = 0x02;
            object[0x03] = 0x02;
        }
    }

    fun show_cocoon(show) {
        if(show) {
            object[0x01] = 0x01;
        } else {
            object[0x01] = 0x00;
        }
    }

    fun trigger_enter() {
        show_thraxx(False);
        // show_cocoon();

        fade_in();
    }
};

map northern_jungle(0x41) {
    enum entrance {
        north = entrance(0x56, 0x05, DIRECTION.SOUTH),
        south = entrance(0x07, 0x4d, DIRECTION.NORTH),

        cave_1 = entrance(0x08, 0x0f, DIRECTION.SOUTH),
        cave_2 = entrance(0x48, 0x13, DIRECTION.SOUTH),

        wings = entrance(0x0f, 0x3f, DIRECTION.NONE),
    }

    enum stepon_trigger {
        exit_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        cave_2 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        cave_1 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map volcano(0x69) {
    enum entrance {
        cutscene_north_1 = entrance(0x4a, 0x38, DIRECTION.NONE),
        cutscene_north_2 = entrance(0x5f, 0x1b, DIRECTION.NONE),
        east = entrance(0x6d, 0x83, DIRECTION.WEST), // 0x6b, 0x83
        south = entrance(0x1b, 0x9d, DIRECTION.NORTH),

        cave_west = entrance(0x0b, 0x70, DIRECTION.SOUTH),
        cave_center = entrance(0x3f, 0x4a, DIRECTION.SOUTH),
        cave_east = entrance(0x4d, 0x6a, DIRECTION.SOUTH),
    }

    enum stepon_trigger {
        tunnel_gauge = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        stepon_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        stepon_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        stepon_4 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        stepon_5 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        stepon_6 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        stepon_8 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        stepon_9 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        stepon_10 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        cave_east = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        cave_west = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        cave_center = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        stepon_16 = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
        stepon_17 = @install() fun test() {
            subtext(string("exit? 17 [END]"));
        },
        stepon_18 = @install() fun test() {
            subtext(string("exit? 18 [END]"));
        },
        stepon_19 = @install() fun test() {
            subtext(string("exit? 19 [END]"));
        },

        stepon_20 = @install() fun test() {
            subtext(string("exit? 20 [END]"));
        },
        stepon_21 = @install() fun test() {
            subtext(string("exit? 21 [END]"));
        },
        stepon_22 = @install() fun test() {
            subtext(string("exit? 22 [END]"));
        },
        stepon_23 = @install() fun test() {
            subtext(string("exit? 23 [END]"));
        },
        stepon_24 = @install() fun test() {
            subtext(string("exit? 24 [END]"));
        },
        stepon_25 = @install() fun test() {
            subtext(string("exit? 25 [END]"));
        },
        stepon_26 = @install() fun test() {
            subtext(string("exit? 26 [END]"));
        },
        stepon_27 = @install() fun test() {
            subtext(string("exit? 27 [END]"));
        },
        stepon_28 = @install() fun test() {
            subtext(string("exit? 28 [END]"));
        },
        stepon_29 = @install() fun test() {
            subtext(string("exit? 29 [END]"));
        },

        stepon_30 = @install() fun test() {
            subtext(string("exit? 30 [END]"));
        }
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
        b_trigger_25 = @install() fun test() {
            subtext(string("b? 25 [END]"));
        },
        b_trigger_26 = @install() fun test() {
            subtext(string("b? 26 [END]"));
        },
        b_trigger_27 = @install() fun test() {
            subtext(string("b? 27 [END]"));
        },
        b_trigger_28 = @install() fun test() {
            subtext(string("b? 28 [END]"));
        },
        b_trigger_29 = @install() fun test() {
            subtext(string("b? 29 [END]"));
        },

        b_trigger_30 = @install() fun test() {
            subtext(string("b? 30 [END]"));
        },
        b_trigger_31 = @install() fun test() {
            subtext(string("b? 31 [END]"));
        },
        b_trigger_32 = @install() fun test() {
            subtext(string("b? 32 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map graveyard(0x27) {
    enum entrance {
        north = entrance(0x32, 0x0f, DIRECTION.SOUTH),
        south = entrance(0x2f, 0x5f, DIRECTION.NORTH)
    }

    enum stepon_trigger {
        exit_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        spawn_boss = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        }
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
        b_trigger_25 = @install() fun test() {
            subtext(string("b? 25 [END]"));
        },
        b_trigger_26 = @install() fun test() {
            subtext(string("b? 26 [END]"));
        },
        b_trigger_27 = @install() fun test() {
            subtext(string("b? 27 [END]"));
        },
        b_trigger_28 = @install() fun test() {
            subtext(string("b? 28 [END]"));
        },
        b_trigger_29 = @install() fun test() {
            subtext(string("b? 29 [END]"));
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

map top_of_volcano(0x52) { // buggy parallax scrolling
    enum entrance {
        test = entrance(0x10, 0x10, DIRECTION.NONE)
    }

    enum stepon_trigger {
        exit_hut = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map sky(0x50) {
    enum entrance {
        south = entrance(0x10, 0x10, DIRECTION.NONE)
    }

    fun trigger_enter() {
        fade_in();
    }
};

map salabog(0x01) {
    enum entrance {
        hut = entrance(0x1b, 0x11, DIRECTION.SOUTH),
        south = entrance(0x1c, 0x61, DIRECTION.NORTH)
    }

    enum stepon_trigger {
        exit_hut = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        spawn_boss = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

map dungeon_volcano(0x3b) {
    enum entrance {
        north_1 = entrance(0x2e, 0x05, DIRECTION.SOUTH),
        north_2 = entrance(0x76, 0x06, DIRECTION.SOUTH),
        south_1 = entrance(0x51, 0xb1, DIRECTION.NORTH),
        south_2 = entrance(0x7d, 0xb1, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_north_1 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_north_2 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_south_1 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_south_2 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        stepon_22 = @install() fun test() {
            subtext(string("exit? 22 [END]"));
        },
        stepon_23 = @install() fun test() {
            subtext(string("exit? 23 [END]"));
        },
        stepon_24 = @install() fun test() {
            subtext(string("exit? 24 [END]"));
        },
        stepon_25 = @install() fun test() {
            subtext(string("exit? 25 [END]"));
        },
        stepon_26 = @install() fun test() {
            subtext(string("exit? 26 [END]"));
        },
        stepon_27 = @install() fun test() {
            subtext(string("exit? 27 [END]"));
        },
        stepon_28 = @install() fun test() {
            subtext(string("exit? 28 [END]"));
        },
        stepon_29 = @install() fun test() {
            subtext(string("exit? 29 [END]"));
        },

        stepon_30 = @install() fun test() {
            subtext(string("exit? 30 [END]"));
        },
        stepon_31 = @install() fun test() {
            subtext(string("exit? 31 [END]"));
        },
        stepon_32 = @install() fun test() {
            subtext(string("exit? 32 [END]"));
        },
        stepon_33 = @install() fun test() {
            subtext(string("exit? 33 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map volcano_rooms(0x3c) {
    enum entrance {
        main_north = entrance(0xd3, 0x3d, DIRECTION.SOUTH),
        main_east = entrance(0xf7, 0x5b, DIRECTION.WEST),
        main_south = entrance(0xd5, 0x95, DIRECTION.NORTH),
        main_west = entrance(0xbb, 0x5d, DIRECTION.EAST),

        cave_outside = entrance(0x54, 0xb1, DIRECTION.NORTH),

        room_nw_north = entrance(0x20, 0x85, DIRECTION.SOUTH),
        room_nw_west = entrance(0x01, 0xa3, DIRECTION.EAST),

        room_es_east = entrance(0x67, 0x1c, DIRECTION.WEST),
        room_es_south = entrance(0x4c, 0x39, DIRECTION.NORTH),

        room_nss_north = entrance(0x9e, 0x05, DIRECTION.SOUTH),
        room_nss_south_1 = entrance(0x9e, 0x37, DIRECTION.NORTH),
        room_nss_south_2 = entrance(0x84, 0x37, DIRECTION.NORTH),

        room_s_south = entrance(0x9e, 0x7b, DIRECTION.NORTH),

        room_alchemist = entrance(0xd0, 0x05, DIRECTION.SOUTH),

        room_ns_north = entrance(0x1c, 0x3d, DIRECTION.SOUTH),
        room_ns_south = entrance(0x22, 0x7b, DIRECTION.NORTH),

        room_nne_north_1 = entrance(0x4c, 0x36, DIRECTION.SOUTH),
        room_nne_north_2 = entrance(0x60, 0x39, DIRECTION.SOUTH),
        room_nne_east = entrance(0x7f, 0x60, DIRECTION.WEST),

        room_sw_south = entrance(0x1c, 0x3b, DIRECTION.NORTH),
        room_sw_west = entrance(0x01, 0x24, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_room_nw_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_room_nw_west = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_cave_south = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_room_s_south = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_room_nne_east = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_room_ns_south = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        exit_room_sw_west = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        exit_room_ns_north = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_room_sw_south = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        exit_room_nne_north_1 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        exit_room_es_south = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        exit_room_es_east = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        exit_room_nne_north_2 = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        exit_room_nss_south_2 = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        exit_room_nss_south_1 = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        exit_room_nss_north = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        exit_room_alchemist_north = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
        exit_main_east = @install() fun test() {
            subtext(string("exit? 17 [END]"));
        },
        exit_main_west = @install() fun test() {
            subtext(string("exit? 18 [END]"));
        },
        exit_main_north = @install() fun test() {
            subtext(string("exit? 19 [END]"));
        },

        exit_main_south = @install() fun test() {
            subtext(string("exit? 20 [END]"));
        },
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};
map volcano_rooms_main(0x3c) { // variant: main
    enum entrance {
        north = entrance(0xd3, 0x3d, DIRECTION.SOUTH),
        east = entrance(0xf7, 0x5b, DIRECTION.WEST),
        south = entrance(0xd5, 0x95, DIRECTION.NORTH),
        west = entrance(0xbb, 0x5d, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_room_nw_north = nop(),
        exit_room_nw_west = nop(),
        exit_cave_south = nop(),
        exit_room_s_south = nop(),
        exit_room_nne_east = nop(),
        exit_room_ns_south = nop(),
        exit_room_sw_west = nop(),
        exit_room_ns_north = nop(),
        exit_room_sw_south = nop(),
        exit_room_nne_north_1 = nop(),

        exit_room_es_south = nop(),
        exit_room_es_east = nop(),
        exit_room_nne_north_2 = nop(),
        exit_room_nss_south_2 = nop(),
        exit_room_nss_south_1 = nop(),
        exit_room_nss_north = nop(),
        exit_room_alchemist_north = nop(),
        exit_east = @install() fun test() {
            subtext(string("exit? 17 [END]"));
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 18 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 19 [END]"));
        },

        exit_south = @install() fun test() {
            subtext(string("exit? 20 [END]"));
        },
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};
map volcano_rooms_cave(0x3c) { // variant: cave
    enum entrance {
        south = entrance(0x54, 0xb1, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_room_nw_north = nop(),
        exit_room_nw_west = nop(),
        exit_south = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_room_s_south = nop(),
        exit_room_nne_east = nop(),
        exit_room_ns_south = nop(),
        exit_room_sw_west = nop(),
        exit_room_ns_north = nop(),
        exit_room_sw_south = nop(),
        exit_room_nne_north_1 = nop(),

        exit_room_es_south = nop(),
        exit_room_es_east = nop(),
        exit_room_nne_north_2 = nop(),
        exit_room_nss_south_2 = nop(),
        exit_room_nss_south_1 = nop(),
        exit_room_nss_north = nop(),
        exit_room_alchemist_north = nop(),
        exit_main_east = nop(),
        exit_main_west = nop(),
        exit_main_north = nop(),

        exit_main_south = nop(),
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};
map volcano_rooms_room_nw(0x3c) { // variant: room_nw
    enum entrance {
        north = entrance(0x20, 0x85, DIRECTION.SOUTH),
        west = entrance(0x01, 0xa3, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_south = nop(),
        exit_room_s_south = nop(),
        exit_room_nne_east = nop(),
        exit_room_ns_south = nop(),
        exit_room_sw_west = nop(),
        exit_room_ns_north = nop(),
        exit_room_sw_south = nop(),
        exit_room_nne_north_1 = nop(),

        exit_room_es_south = nop(),
        exit_room_es_east = nop(),
        exit_room_nne_north_2 = nop(),
        exit_room_nss_south_2 = nop(),
        exit_room_nss_south_1 = nop(),
        exit_room_nss_north = nop(),
        exit_room_alchemist_north = nop(),
        exit_main_east = nop(),
        exit_main_west = nop(),
        exit_main_north = nop(),

        exit_main_south = nop(),
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};
map volcano_rooms_room_es(0x3c) { // variant: room_es
    enum entrance {
        east = entrance(0x67, 0x1c, DIRECTION.WEST),
        south = entrance(0x4c, 0x39, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_room_nw_north = nop(),
        exit_room_nw_west = nop(),
        exit_south = nop(),
        exit_room_s_south = nop(),
        exit_room_nne_east = nop(),
        exit_room_ns_south = nop(),
        exit_room_sw_west = nop(),
        exit_room_ns_north = nop(),
        exit_room_sw_south = nop(),
        exit_room_nne_north_1 = nop(),

        exit_south = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        exit_room_nne_north_2 = nop(),
        exit_room_nss_south_2 = nop(),
        exit_room_nss_south_1 = nop(),
        exit_room_nss_north = nop(),
        exit_room_alchemist_north = nop(),
        exit_main_east = nop(),
        exit_main_west = nop(),
        exit_main_north = nop(),

        exit_main_south = nop(),
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};
map volcano_rooms_room_nss(0x3c) { // variant: room_nss
    enum entrance {
        north = entrance(0x9e, 0x05, DIRECTION.SOUTH),
        south_1 = entrance(0x9e, 0x37, DIRECTION.NORTH),
        south_2 = entrance(0x84, 0x37, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_room_nw_north = nop(),
        exit_room_nw_west = nop(),
        exit_south = nop(),
        exit_room_s_south = nop(),
        exit_room_nne_east = nop(),
        exit_room_ns_south = nop(),
        exit_room_sw_west = nop(),
        exit_room_ns_north = nop(),
        exit_room_sw_south = nop(),
        exit_room_nne_north_1 = nop(),

        exit_room_es_south = nop(),
        exit_room_es_east = nop(),
        exit_room_nne_north_2 = nop(),
        exit_south_2 = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        exit_south_1 = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        exit_room_alchemist_north = nop(),
        exit_main_east = nop(),
        exit_main_west = nop(),
        exit_main_north = nop(),

        exit_main_south = nop(),
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};
map volcano_rooms_room_s(0x3c) { // variant: room_s
    enum entrance {
        south = entrance(0x9e, 0x7b, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_room_nw_north = nop(),
        exit_room_nw_west = nop(),
        exit_south = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_room_nne_east = nop(),
        exit_room_ns_south = nop(),
        exit_room_sw_west = nop(),
        exit_room_ns_north = nop(),
        exit_room_sw_south = nop(),
        exit_room_nne_north_1 = nop(),

        exit_room_es_south = nop(),
        exit_room_es_east = nop(),
        exit_room_nne_north_2 = nop(),
        exit_room_nss_south_2 = nop(),
        exit_room_nss_south_1 = nop(),
        exit_room_nss_north = nop(),
        exit_room_alchemist_north = nop(),
        exit_main_east = nop(),
        exit_main_west = nop(),
        exit_main_north = nop(),

        exit_main_south = nop(),
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};
map volcano_rooms_room_alchemist(0x3c) { // variant: room_alchemist
    enum entrance {
        north = entrance(0xd0, 0x05, DIRECTION.SOUTH),
    }

    enum stepon_trigger {
        exit_room_nw_north = nop(),
        exit_room_nw_west = nop(),
        exit_south = nop(),
        exit_room_s_south = nop(),
        exit_room_nne_east = nop(),
        exit_room_ns_south = nop(),
        exit_room_sw_west = nop(),
        exit_room_ns_north = nop(),
        exit_room_sw_south = nop(),
        exit_room_nne_north_1 = nop(),

        exit_room_es_south = nop(),
        exit_room_es_east = nop(),
        exit_room_nne_north_2 = nop(),
        exit_room_nss_south_2 = nop(),
        exit_room_nss_south_1 = nop(),
        exit_room_nss_north = nop(),
        exit_north = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
        exit_main_east = nop(),
        exit_main_west = nop(),
        exit_main_north = nop(),

        exit_main_south = nop(),
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};
map volcano_rooms_room_ns(0x3c) { // variant: room_ns
    enum entrance {
        north = entrance(0x1c, 0x3d, DIRECTION.SOUTH),
        south = entrance(0x22, 0x7b, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_room_nw_north = nop(),
        exit_room_nw_west = nop(),
        exit_south = nop(),
        exit_room_s_south = nop(),
        exit_room_nne_east = nop(),
        exit_south = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        exit_room_sw_west = nop(),
        exit_north = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_room_sw_south = nop(),
        exit_room_nne_north_1 = nop(),

        exit_room_es_south = nop(),
        exit_room_es_east = nop(),
        exit_room_nne_north_2 = nop(),
        exit_room_nss_south_2 = nop(),
        exit_room_nss_south_1 = nop(),
        exit_room_nss_north = nop(),
        exit_north = nop(),
        exit_main_east = nop(),
        exit_main_west = nop(),
        exit_main_north = nop(),

        exit_main_south = nop(),
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};
map volcano_rooms_room_nne(0x3c) { // variant: room_nne
    enum entrance {
        north_1 = entrance(0x4c, 0x36, DIRECTION.SOUTH),
        north_2 = entrance(0x60, 0x39, DIRECTION.SOUTH),
        east = entrance(0x7f, 0x60, DIRECTION.WEST),
    }

    enum stepon_trigger {
        exit_room_nw_north = nop(),
        exit_room_nw_west = nop(),
        exit_south = nop(),
        exit_room_s_south = nop(),
        exit_east = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_room_ns_south = nop(),
        exit_room_sw_west = nop(),
        exit_room_ns_north = nop(),
        exit_room_sw_south = nop(),
        exit_north_1 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        exit_room_es_south = nop(),
        exit_room_es_east = nop(),
        exit_north_2 = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        exit_room_nss_south_2 = nop(),
        exit_room_nss_south_1 = nop(),
        exit_room_nss_north = nop(),
        exit_room_alchemist_north = nop(),
        exit_main_east = nop(),
        exit_main_west = nop(),
        exit_main_north = nop(),

        exit_main_south = nop(),
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};
map volcano_rooms_room_sw(0x3c) { // variant: room_sw
    enum entrance {
        south = entrance(0x1c, 0x3b, DIRECTION.NORTH),
        west = entrance(0x01, 0x24, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_room_nw_north = nop(),
        exit_room_nw_west = nop(),
        exit_south = nop(),
        exit_room_s_south = nop(),
        exit_west = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        exit_room_ns_north = nop(),
        exit_south = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        exit_room_nne_north_1 = nop(),

        exit_room_es_south = nop(),
        exit_room_es_east = nop(),
        exit_room_nne_north_2 = nop(),
        exit_room_nss_south_2 = nop(),
        exit_room_nss_south_1 = nop(),
        exit_room_nss_north = nop(),
        exit_room_alchemist_north = nop(),
        exit_main_east = nop(),
        exit_main_west = nop(),
        exit_main_north = nop(),

        exit_main_south = nop(),
    }
    
    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map pipe_maze(0x3d) {
    enum entrance {
        pipe_east = entrance(0x67, 0x94, DIRECTION.NONE),
        pipe_west = entrance(0x5b, 0x94, DIRECTION.NONE),
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        stepon_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        stepon_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        stepon_4 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        stepon_5 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        stepon_6 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        stepon_8 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        stepon_9 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        stepon_10 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        stepon_11 = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        stepon_12 = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        stepon_13 = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        stepon_14 = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        stepon_15 = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        stepon_16 = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
        stepon_17 = @install() fun test() {
            subtext(string("exit? 17 [END]"));
        },
        stepon_18 = @install() fun test() {
            subtext(string("exit? 18 [END]"));
        },
        stepon_19 = @install() fun test() {
            subtext(string("exit? 19 [END]"));
        },

        stepon_20 = @install() fun test() {
            subtext(string("exit? 20 [END]"));
        },
        stepon_21 = @install() fun test() {
            subtext(string("exit? 21 [END]"));
        },
        stepon_22 = @install() fun test() {
            subtext(string("exit? 22 [END]"));
        },
        stepon_23 = @install() fun test() {
            subtext(string("exit? 23 [END]"));
        },
        stepon_24 = @install() fun test() {
            subtext(string("exit? 24 [END]"));
        },
        stepon_25 = @install() fun test() {
            subtext(string("exit? 25 [END]"));
        },
        stepon_26 = @install() fun test() {
            subtext(string("exit? 26 [END]"));
        },
        stepon_27 = @install() fun test() {
            subtext(string("exit? 27 [END]"));
        },
        stepon_28 = @install() fun test() {
            subtext(string("exit? 28 [END]"));
        },
        stepon_29 = @install() fun test() {
            subtext(string("exit? 29 [END]"));
        },

        stepon_30 = @install() fun test() {
            subtext(string("exit? 30 [END]"));
        },
        stepon_31 = @install() fun test() {
            subtext(string("exit? 31 [END]"));
        },
        stepon_32 = @install() fun test() {
            subtext(string("exit? 32 [END]"));
        },
        stepon_33 = @install() fun test() {
            subtext(string("exit? 33 [END]"));
        },
        stepon_34 = @install() fun test() {
            subtext(string("exit? 34 [END]"));
        },
        stepon_35 = @install() fun test() {
            subtext(string("exit? 35 [END]"));
        },
        stepon_36 = @install() fun test() {
            subtext(string("exit? 36 [END]"));
        },
        stepon_37 = @install() fun test() {
            subtext(string("exit? 37 [END]"));
        },
        stepon_38 = @install() fun test() {
            subtext(string("exit? 38 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map pipe_rooms(0x3e) {
    enum entrance {
        pipe_east = entrance(0x07, 0x17, DIRECTION.NONE),
        south = entrance(0x1a, 0x2f, DIRECTION.NORTH),
        pipe_west = entrance(0x2d, 0x17, DIRECTION.NONE),
        
        room_switch = entrance(0xbf, 0x23, DIRECTION.NONE),
        room_gate = entrance(0x87, 0x1f, DIRECTION.NONE),
        gate = entrance(0x98, 0x10, DIRECTION.SOUTH),
        room_empty = entrance(0x6f, 0x1b, DIRECTION.NONE),
    }

    enum stepon_trigger {
        switch_triggered = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_room_switch = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_room_gate = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_room_empty = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_north_1 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_north_2 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        jump_room_switch = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        jump_room_gate = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        jump_empty_room = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        exit_gate = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        approach_gate = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
    }

    fun trigger_enter() {
        // object[0x00] = 0x01; // show gourd_empty_room_west
        // object[0x01] = 0x01; // show gourd_empty_room_north
        // object[0x02] = 0x01; // show gourd_empty_room_center
        // object[0x03] = 0x01; // show gourd_empty_room_east
        // object[0x04] = 0x01; // hide bones_empty_room_1
        // object[0x05] = 0x01; // hide bones_empty_room_2
        // object[0x06] = 0x7e; // open gate
        // object[0x07] = 0x02; // loot gourd_entrance

        fade_in();
    }
};
map pipe_rooms_entrance(0x3e) { // variation: entrance
    enum entrance {
        pipe_east = entrance(0x07, 0x17, DIRECTION.NONE),
        south = entrance(0x1a, 0x2f, DIRECTION.NORTH),
        pipe_west = entrance(0x2d, 0x17, DIRECTION.NONE),
    }

    enum stepon_trigger {
        switch_triggered = nop(),
        exit_room_switch = nop(),
        exit_room_gate = nop(),
        exit_room_empty = nop(),
        exit_north_1 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_north_2 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        jump_room_switch = nop(),
        jump_room_gate = nop(),
        exit_south = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        jump_empty_room = nop(),

        exit_gate = nop(),
        approach_gate = nop(),
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
    }

    fun trigger_enter() {
        // object[0x07] = 0x02; // loot gourd_entrance
        
        fade_in();
    }
};
map pipe_rooms_gateswitch(0x3e) { // variation
    enum entrance {
        pipe_switch = entrance(0xbf, 0x23, DIRECTION.NONE),
        pipe_gate = entrance(0x87, 0x1f, DIRECTION.NONE),
    }

    enum stepon_trigger {
        switch_triggered = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_room_switch = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_room_gate = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_room_empty = nop(),
        exit_north_1 = nop(),
        exit_north_2 = nop(),
        jump_room_switch = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        jump_room_gate = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_south = nop(),
        jump_empty_room = nop(),

        exit_gate = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        approach_gate = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
    }

    fun trigger_enter() {
        // object[0x06] = 0x7e; // open gate

        fade_in();
    }
};
map pipe_rooms_empty(0x3e) { // variation
    enum entrance {
        room_empty = entrance(0x6f, 0x1b, DIRECTION.NONE),
    }

    enum stepon_trigger {
        switch_triggered = nop(),
        exit_room_switch = nop(),
        exit_room_gate = nop(),
        exit_room_empty = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_north_1 = nop(),
        exit_north_2 = nop(),
        jump_room_switch = nop(),
        jump_room_gate = nop(),
        exit_south = nop(),
        jump_empty_room = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        exit_gate = nop(),
        approach_gate = nop(),
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
    }

    fun trigger_enter() {
        // object[0x01] = 0x01; // show gourd_empty_room_west
        // object[0x01] = 0x01; // show gourd_empty_room_north
        // object[0x02] = 0x01; // show gourd_empty_room_center
        // object[0x03] = 0x01; // show gourd_empty_room_east
        // object[0x04] = 0x01; // hide bones_empty_room_1
        // object[0x05] = 0x01; // hide bones_empty_room_2

        fade_in();
    }
};

map magmar(0x3f) {
    enum entrance {
        south = entrance(0x18, 0x47, DIRECTION.NORTH)
    }

    enum stepon_trigger {
        exit_south = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

// act 2

map river(0x53) {
    enum entrance {
        south = entrance(0x10, 0x10, DIRECTION.NONE)
    }

    fun trigger_enter() {
        fade_in();
    }
};

map ship(0x68) {
    enum entrance {
        east = entrance(0x5f, 0x5b, DIRECTION.WEST),
        west = entrance(0x05, 0x59, DIRECTION.EAST),

        door_1_1 = entrance(0x59, 0x2d, DIRECTION.SOUTH),
        door_2_1 = entrance(0x30, 0x24, DIRECTION.SOUTH),
        door_2_2 = entrance(0x32, 0x40, DIRECTION.SOUTH),
        door_3_1 = entrance(0x13, 0x0d, DIRECTION.SOUTH),
        door_3_2 = entrance(0x4b, 0x0d, DIRECTION.SOUTH),
    }

    enum stepon_trigger {
        door_3_1_stairs = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        door_3_2_stairs = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        door_2_2_stairs = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        door_1_1_stairs = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        lift_top = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        door_3_1 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        door_2_2 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        door_2_1 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        door_1_1 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        door_3_2 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        lift_bottom = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map ship_inside(0x30) {
    enum entrance {
        cave_hammock = entrance(0x0f, 0x29, DIRECTION.NORTH),
        cave_crates = entrance(0x0f, 0x5b, DIRECTION.NORTH),
        ship_small = entrance(0x47, 0x51, DIRECTION.NORTH),
        ship_tavern = entrance(0x6f, 0x51, DIRECTION.NORTH),
        cave_monk = entrance(0x4f, 0x23, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        monk = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        monk_trigger_west = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        monk_trigger_south = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_cave_hammock = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_ship_tavern = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_ship_small = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        exit_cave_crates = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        exit_cave_monk = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map crusticia_firepit(0x04) {
    enum entrance {
        west = entrance(0x03, 0x1f, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_east = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        windwalker = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map nobilia_inn(0x0c) {
    enum entrance {
        shop_south_1 = entrance(0x51, 0x1b, DIRECTION.NORTH),
        shop_south_2 = entrance(0x0d, 0x1b, DIRECTION.NORTH),

        inn_south = entrance(0x0b, 0x14, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_shop_south_2 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_inn_south = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        atlas = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_shop_south_1 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
    }

    fun init_room(index) {
        if(index == 0x01) {
            init_map(0x02, 0x00, 0x5a, 0x1c);
        } else if(index == 0x02) {
            init_map(0x00, 0x24, 0x24, 0x42);
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};
map nobilia_inn__shop(0x0c) { // variant: shop
    enum entrance {
        south_1 = entrance(0x51, 0x1b, DIRECTION.NORTH),
        south_2 = entrance(0x0d, 0x1b, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_south_2 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_inn_south = nop(),
        atlas = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_south_1 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
    }

    fun init_room(index) {
        if(index == 0x01) {
            init_map(0x02, 0x00, 0x5a, 0x1c);
        } else if(index == 0x02) {
            init_map(0x00, 0x24, 0x24, 0x42);
        }
    }

    fun trigger_enter() {
        init_room(0x01);

        fade_in();
    }
};
map nobilia_inn__inn(0x0c) { // variant: inn
    enum entrance {
        south = entrance(0x0b, 0x14, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_shop_south_2 = nop(),
        exit_south = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        atlas = nop(),
        exit_shop_south_1 = nop(),
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
    }

    fun init_room(index) {
        if(index == 0x01) {
            init_map(0x02, 0x00, 0x5a, 0x1c);
        } else if(index == 0x02) {
            init_map(0x00, 0x24, 0x24, 0x42);
        }
    }

    fun trigger_enter() {
        init_room(0x02);

        fade_in();
    }
};

map nobilia_market(0x0a) {
    enum entrance {
        north_1 = entrance(0x0f, 0x08, DIRECTION.SOUTH),
        north_2 = entrance(0x30, 0x08, DIRECTION.SOUTH),
        north_3 = entrance(0x54, 0x08, DIRECTION.SOUTH),
        east_1 = entrance(0x5f, 0x18, DIRECTION.WEST),
        east_2 = entrance(0x5f, 0x46, DIRECTION.WEST),
        west = entrance(0x05, 0x4b, DIRECTION.EAST),

        door_1 = entrance(0x5c, 0x36, DIRECTION.SOUTH),
        door_2 = entrance(0x5a, 0x72, DIRECTION.SOUTH),
    }

    enum stepon_trigger {
        prophet_south = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        prophet_east = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        prophet_north = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_north_2 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_north_3 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_north_1 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        exit_east_1 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        exit_east_2 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        door_1 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        door_2 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        b_trigger_22 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        b_trigger_23 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        b_trigger_24 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
        b_trigger_25 = @install() fun test() {
            subtext(string("b? 25 [END]"));
        },
        b_trigger_26 = @install() fun test() {
            subtext(string("b? 26 [END]"));
        },
        b_trigger_27 = @install() fun test() {
            subtext(string("b? 27 [END]"));
        },
        b_trigger_28 = @install() fun test() {
            subtext(string("b? 28 [END]"));
        },
        b_trigger_29 = @install() fun test() {
            subtext(string("b? 29 [END]"));
        },

        b_trigger_30 = @install() fun test() {
            subtext(string("b? 30 [END]"));
        },
        b_trigger_31 = @install() fun test() {
            subtext(string("b? 31 [END]"));
        },
        b_trigger_32 = @install() fun test() {
            subtext(string("b? 32 [END]"));
        },
        b_trigger_33 = @install() fun test() {
            subtext(string("b? 33 [END]"));
        },
        b_trigger_34 = @install() fun test() {
            subtext(string("b? 34 [END]"));
        },
        b_trigger_35 = @install() fun test() {
            subtext(string("b? 35 [END]"));
        },
        b_trigger_36 = @install() fun test() {
            subtext(string("b? 36 [END]"));
        },
        b_trigger_37 = @install() fun test() {
            subtext(string("b? 37 [END]"));
        },
        b_trigger_38 = @install() fun test() {
            subtext(string("b? 38 [END]"));
        },
        b_trigger_39 = @install() fun test() {
            subtext(string("b? 39 [END]"));
        },

        b_trigger_40 = @install() fun test() {
            subtext(string("b? 40 [END]"));
        },
        b_trigger_41 = @install() fun test() {
            subtext(string("b? 41 [END]"));
        },
        b_trigger_42 = @install() fun test() {
            subtext(string("b? 42 [END]"));
        },
        b_trigger_43 = @install() fun test() {
            subtext(string("b? 43 [END]"));
        },
        b_trigger_44 = @install() fun test() {
            subtext(string("b? 44 [END]"));
        },
        b_trigger_45 = @install() fun test() {
            subtext(string("b? 45 [END]"));
        },
        b_trigger_46 = @install() fun test() {
            subtext(string("b? 46 [END]"));
        },
        b_trigger_47 = @install() fun test() {
            subtext(string("b? 47 [END]"));
        },
        b_trigger_48 = @install() fun test() {
            subtext(string("b? 48 [END]"));
        },
        b_trigger_49 = @install() fun test() {
            subtext(string("b? 49 [END]"));
        },

        b_trigger_50 = @install() fun test() {
            subtext(string("b? 50 [END]"));
        },
        b_trigger_51 = @install() fun test() {
            subtext(string("b? 51 [END]"));
        },
        b_trigger_52 = @install() fun test() {
            subtext(string("b? 52 [END]"));
        },
        b_trigger_53 = @install() fun test() {
            subtext(string("b? 53 [END]"));
        },
        b_trigger_54 = @install() fun test() {
            subtext(string("b? 54 [END]"));
        },
        b_trigger_55 = @install() fun test() {
            subtext(string("b? 55 [END]"));
        },
        b_trigger_56 = @install() fun test() {
            subtext(string("b? 56 [END]"));
        },
        b_trigger_57 = @install() fun test() {
            subtext(string("b? 57 [END]"));
        },
    }

    fun open_doors(open) {
        if(open) {
            tile_animate(0x20, 0xff, 0x02);
        } else {
            tile_animate(0x20, 0xff, 0x00);
        }
    }

    fun trigger_enter() {
        // object[0x00] = 0x01; // remove vendor_1_1 (spice guy)
        // object[0x01] = 0x01; // remove vendor_1_2 (rice lady)
        // object[0x02] = 0x01; // remove guard_1_1 (next to rice lady)
        // object[0x03] = 0x01; // remove vendor_1_3 (fish lady)
        // object[0x04] = 0x01; // remove vendor_1_4 (other rice guy)
        // object[0x05] = 0x01; // remove vendor_2_1 (spoon lady)
        // object[0x06] = 0x01; // remove vendor_2_2 (egg guy)
        // object[0x07] = 0x01; // remove vendor_3_1 (jackal lady)
        // object[0x08] = 0x01; // remove vendor_2_3 (pot lady)
        // object[0x09] = 0x01; // remove person_4_1 (next to pot lady, feeds chicken)
        // object[0x0a] = 0x01; // remove vendor_3_2 (amulet guy)
        // object[0x0b] = 0x01; // remove vendor_3_3 (chest lady)
        // object[0x0c] = 0x01; // remove ???
        // object[0x0d] = 0x01; // remove vendor_3_4 (polish lady)
        // object[0x0e] = 0x01; // remove guard_4_1 (next to entrance)
        // object[0x0f] = 0x01; // remove vendor_4_1 (other rice lady)
        // object[0x10] = 0x01; // remove vendor_4_2 (other beads lady)
        // object[0x11] = 0x01; // remove person_4_2 (next to vendor_4_2, juggler)
        // object[0x12] = 0x01; // remove person_4_3 (next to vendor_4_2, juggler crowd)
        // object[0x13] = 0x01; // remove vendor_4_3 (tapestry lady)
        // object[0x14] = 0x01; // remove vendor_5_4 (currency lady)
        // object[0x15] = 0x01; // remove vendor_5_1 (perfume lady)
        // object[0x16] = 0x01; // remove vendor_5_2 (other spice guy)
        // object[0x17] = 0x01; // remove vendor_5_3 (chicken guy)
        // object[0x18] = 0x01; // remove vendor_6_1 (beads lady)
        // object[0x19] = 0x01; // remove vendor_7_2 (tablet lady)
        // object[0x1a] = 0x01; // remove vendor_8_1 (other beads guy)
        // object[0x1b] = 0x01; // remove vendor_8_2 (jade disk lady)
        // object[0x1c] = 0x01; // remove vendor_9_1 (heart lady)
        // object[0x1d] = 0x01; // remove vendor_9_2 (helmet guy)
        // object[0x1e] = 0x01; // remove vendor_7_1 (scarab lady)
        // object[0x1f] = 0x01; // remove vendor_10_1 (sunstone guy)
        // object[0x20] = 0x01; // remove vendor_10_2 (moxa lady)
        // object[0x21] = 0x01; // remove vendor_10_3 (appraisal lady)
        // object[0x22] = 0x01; // remove vendor_10_4 (sheath guy)
        // object[0x23] = 0x01; // remove ???
        // object[0x24] = 0x01; // remove vendor_11_1 (beads lady)
        // object[0x24] = 0x01; // remove vendor_10_5 (glove lady)
        // object[0x25] = 0x01; // remove ???
        // object[0x26] = 0x01; // remove basket (between vendor_1_1 ans vendor_1_2)
        // object[0x27] = 0x01; // remove prophet (goat, chicke, basket)
        
        fade_in();
    }
};

map nobilia_center(0x08) {
    enum entrance {
        north = entrance(0x2c, 0x03, DIRECTION.SOUTH),
        east = entrance(0x5b, 0x37, DIRECTION.WEST),
        west_1 = entrance(0x01, 0x40, DIRECTION.EAST),
        west_2 = entrance(0x01, 0x14, DIRECTION.EAST),
        door = entrance(0x08, 0x58, DIRECTION.SOUTH),
    }

    enum stepon_trigger {
        exit_east = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_door = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_west_1 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_west_2 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
    }

    enum b_trigger {
        guard_south = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        guard_center_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        guard_center_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        guard_north = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
    }

    fun open_door(open) {
        if(open) {
            tile_animate(0x20, 0xff, 0x02);
        } else {
            tile_animate(0x20, 0xff, 0x00);
        }
    }

    fun trigger_enter() {
        // object[0x00] = 0x01; // show crowd_1_1
        // object[0x01] = 0x01; // show crowd_1_2
        // object[0x02] = 0x01; // show crowd_1_3
        // object[0x03] = 0x01; // show crowd_1_4
        // object[0x04] = 0x01; // show crowd_1_5
        // object[0x05] = 0x01; // show crowd_2_1
        // object[0x06] = 0x01; // show crowd_2_2
        // object[0x07] = 0x01; // show crowd_2_3
        // object[0x08] = 0x01; // show crowd_2_4
        // object[0x09] = 0x01; // show crowd_2_5
        // object[0x0a] = ???
        // object[0x0b] = same as crowd_2_2 ???
        // object[0x0c] = same as crowd_1_3 ???
        // object[0x0d] = 0x02; // show statue, crater, statue_reparing
        // object[0x0e] = 0x01; // show guard_statue

        fade_in();
    }
};

map nobilia_north(0x1c) {
    enum entrance {
        north = entrance(0x40, 0x04, DIRECTION.SOUTH),
        south_1 = entrance(0x72, 0x38, DIRECTION.NORTH),
        south_2 = entrance(0x4c, 0x38, DIRECTION.NORTH),
        south_3 = entrance(0x08, 0x38, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_south_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_south_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_south_1 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        guard_right = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        guard_left = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        guard = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map nobilia_fire_pit(0x3a) {
    enum entrance {
        west = entrance(0x05, 0x1b, DIRECTION.EAST),

        cutscene_landing = entrance(0x0b, 0x1b, DIRECTION.NONE),
    }

    enum stepon_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map nobilia_palace_outside(0x0b) {
    enum entrance {
        north = entrance(0x56, 0x1f, DIRECTION.SOUTH),
        south = entrance(0x56, 0x45, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        stepon_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        stepon_4 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        stepon_5 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        stepon_6 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        stepon_8 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        stepon_9 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
    }

    fun open_gate(open) {
        if(open) {
            object[0x00] = 0x7e;
        } else {
            object[0x00] = 0x00;
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

map nobilia_palace(0x4d) {
    enum entrance {
        south = entrance(0x37, 0x01, DIRECTION.NORTH)
    }

    fun trigger_enter() {
        fade_in();
    }
};

map vigor(0x1d) {
    enum entrance {
        north_cinematic = entrance(0x20, 0x07, DIRECTION.NONE),
        south = entrance(0x22, 0x69, DIRECTION.NORTH) // 0x22, 0x6a
    }

    fun trigger_enter() {
        init_map(0x00, 0x30, 0x40, 0x70);
        
        fade_in();
    }
};

map eastern_river(0x2f) {
    enum entrance {
        north = entrance(0x53, 0x04, DIRECTION.SOUTH),
        east = entrance(0x81, 0x31, DIRECTION.WEST),
        south = entrance(0x55, 0x6e, DIRECTION.SOUTH),
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        stepon_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },
    }

    fun remove_water(remove) {
        if(remove) {
            object[0x00] = 0x01;
            object[0x01] = 0x01;
        } else {
            object[0x00] = 0x00;
            object[0x01] = 0x00;
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};


map between2(0x05) {
    enum entrance {
        north = entrance(0x2d, 0x01, DIRECTION.SOUTH),
        east = entrance(0x5f, 0x4d, DIRECTION.WEST),
        west_1 = entrance(0x04, 0x71, DIRECTION.EAST),
        west_2 = entrance(0x04, 0x2f, DIRECTION.EAST),
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        stepon_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        stepon_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        stepon_4 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        stepon_5 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        stepon_6 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        exit_west_2_east = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        exit_west_1_exit = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        stepon_12 = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        stepon_13 = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        stepon_14 = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        stepon_15 = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        stepon_16 = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
        stepon_17 = @install() fun test() {
            subtext(string("exit? 17 [END]"));
        },
        stepon_18 = @install() fun test() {
            subtext(string("exit? 18 [END]"));
        },
        stepon_19 = @install() fun test() {
            subtext(string("exit? 19 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map halls_outside(0x2b) {
    enum entrance {
        north = entrance(0x41, 0x03, DIRECTION.SOUTH),
        south = entrance(0x45, 0x41, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_south = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map halls_center(0x29) {
    enum entrance {
        north = entrance(0x29, 0x03, DIRECTION.SOUTH),
        east_1 = entrance(0x4b, 0x3f, DIRECTION.WEST),
        east_2 = entrance(0x49, 0x5d, DIRECTION.WEST),
        south = entrance(0x29, 0x8b, DIRECTION.NORTH),
        west_1 = entrance(0x09, 0x5d, DIRECTION.EAST),
        west_2 = entrance(0x09, 0x3f, DIRECTION.EAST),

        elevator = entrance(0x29, 0x49, DIRECTION.NONE),
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        stepon_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        stepon_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        stepon_4 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        stepon_5 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        stepon_6 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        stepon_8 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        stepon_9 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        stepon_10 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        stepon_11 = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        stepon_12 = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        stepon_13 = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        stepon_14 = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        stepon_15 = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        stepon_16 = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
        stepon_17 = @install() fun test() {
            subtext(string("exit? 17 [END]"));
        },
        stepon_18 = @install() fun test() {
            subtext(string("exit? 18 [END]"));
        },
        stepon_19 = @install() fun test() {
            subtext(string("exit? 19 [END]"));
        },

        stepon_20 = @install() fun test() {
            subtext(string("exit? 20 [END]"));
        },
        stepon_21 = @install() fun test() {
            subtext(string("exit? 21 [END]"));
        },
        stepon_22 = @install() fun test() {
            subtext(string("exit? 22 [END]"));
        },
        stepon_23 = @install() fun test() {
            subtext(string("exit? 23 [END]"));
        },
        stepon_24 = @install() fun test() {
            subtext(string("exit? 24 [END]"));
        },
        stepon_25 = @install() fun test() {
            subtext(string("exit? 25 [END]"));
        },
        stepon_26 = @install() fun test() {
            subtext(string("exit? 26 [END]"));
        },
        stepon_27 = @install() fun test() {
            subtext(string("exit? 27 [END]"));
        },
        stepon_28 = @install() fun test() {
            subtext(string("exit? 28 [END]"));
        },
        stepon_29 = @install() fun test() {
            subtext(string("exit? 29 [END]"));
        },

        stepon_30 = @install() fun test() {
            subtext(string("exit? 30 [END]"));
        },
        stepon_31 = @install() fun test() {
            subtext(string("exit? 31 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map minitaur(0x2c) {
    enum entrance {
        west = entrance(0x01, 0x1b, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_west = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        switch = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

map temple_sw(0x23) {
    enum entrance {
        east = entrance(0x3b, 0x3f, DIRECTION.WEST),
    }

    enum stepon_trigger {
        exit_east = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        switch_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        switch_1 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        switch_3 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
    }

    fun trigger_enter() {
        // object[0x03] = 0x03; // gate 1
        // object[0x04] = 0x03; // gate 2
        // object[0x05] = 0x03; // gate 3

        // object[0x00] = 0x7e; // activate switch_1
        // object[0x01] = 0x7e; // activate switch_2
        // object[0x02] = 0x7e; // activate switch_3

        fade_in();
    }
};

map megataur(0x2a) {
    enum entrance {
        south = entrance(0x41, 0x53, DIRECTION.NORTH)
    }

    enum stepon_trigger {
        exit_south = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

map pyramid(0x06) {
    enum entrance {
        north = entrance(0x66, 0x04, DIRECTION.SOUTH),
        east = entrance(0xa3, 0x71, DIRECTION.WEST),

        cave_tiny = entrance(0x87, 0x84, DIRECTION.SOUTH),

        pyramid_1_1 = entrance(0x4c, 0x6b, DIRECTION.SOUTH),
        pyramid_2_1 = entrance(0x46, 0x4e, DIRECTION.SOUTH),
        pyramid_2_2 = entrance(0x5e, 0x4e, DIRECTION.SOUTH),
        pyramid_3_1 = entrance(0x52, 0x38, DIRECTION.SOUTH),
        pyramid_3_2 = entrance(0x5b, 0x33, DIRECTION.EAST),

        wings = entrance(0x3d, 0x71, DIRECTION.NONE),
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        door_tiny = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        pit_1 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        pit_2 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        pit_3 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        stairs_bottom = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        switch_left = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        switch_right = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        switch_bottom_south = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        switch_bottom_west = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        pit_4 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        pit_5 = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        pit_6 = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        pit_7 = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        pit_8 = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        stepon_16 = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
        door_2_1 = @install() fun test() {
            subtext(string("exit? 17 [END]"));
        },
        door_2_2 = @install() fun test() {
            subtext(string("exit? 18 [END]"));
        },
        door_3_2 = @install() fun test() {
            subtext(string("exit? 19 [END]"));
        },

        switch_bottom = @install() fun test() {
            subtext(string("exit? 20 [END]"));
        },
        stepon_21 = @install() fun test() {
            subtext(string("exit? 21 [END]"));
        },
        switch_left_west = @install() fun test() {
            subtext(string("exit? 22 [END]"));
        },
        switch_left_south = @install() fun test() {
            subtext(string("exit? 23 [END]"));
        },
        switch_right_east = @install() fun test() {
            subtext(string("exit? 24 [END]"));
        },
        switch_right_south = @install() fun test() {
            subtext(string("exit? 25 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 26 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map rimsala(0x58) {
    enum entrance {
        south = entrance(0x21, 0x3e, DIRECTION.NORTH)
    }

    enum stepon_trigger {
        exit_south = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        spawn_boss_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        stepon_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        spawn_boss_1 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

map aquagoth(0x6d) {
    enum entrance {
        south = entrance(0x1b, 0x51, DIRECTION.NORTH)
    }

    fun trigger_enter() {
        fade_in();
    }
};

map tiny_entrance(0x64) {
    enum entrance {
        south = entrance(0x15, 0x23, NORTH)
    }

    enum stepon_trigger {
        exit_south = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_teleporter = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map tiny(0x57) {
    enum entrance {
        test = entrance(0x10, 0x10, DIRECTION.NONE)
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        stepon_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        stepon_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        stepon_4 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        stepon_5 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        stepon_6 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        stepon_8 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        stepon_9 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        stepon_10 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        stepon_11 = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        stepon_12 = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        stepon_13 = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        stepon_14 = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        stepon_15 = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        stepon_16 = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
        stepon_17 = @install() fun test() {
            subtext(string("exit? 17 [END]"));
        },
        stepon_18 = @install() fun test() {
            subtext(string("exit? 18 [END]"));
        },
        stepon_19 = @install() fun test() {
            subtext(string("exit? 19 [END]"));
        },

        stepon_20 = @install() fun test() {
            subtext(string("exit? 20 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

// act 3

map well(0x6c) {
    enum entrance {
        west = entrance(0x01, 0x1c, DIRECTION.EAST)
    }

    enum stepon_trigger {
        exit_west = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
    }

    enum b_trigger {
        barrier = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map gate(0x76) {
    enum entrance {
        north = entrance(0x2c, 0x09, DIRECTION.SOUTH),
        east = entrance(0x67, 0x71, DIRECTION.WEST),
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map market_west(0x4e) {
    enum entrance {
        north = entrance(0x2a, 0x01, DIRECTION.SOUTH),
        east = entrance(0x39, 0xc3, DIRECTION.WEST),
    }

    enum stepon_trigger {
        exit_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map tower_bottom_half(0x7b) {
    enum entrance {
        north = entrance(0x20, 0x01, DIRECTION.SOUTH),
        south = entrance(0x1c, 0x5f, DIRECTION.NORTH),
        west = entrance(0x01, 0x3e, DIRECTION.EAST),

        door_1 = entrance(0x2a, 0x01, DIRECTION.SOUTH),
        door_2 = entrance(0x2a, 0x01, DIRECTION.SOUTH),
        door_3 = entrance(0x2a, 0x01, DIRECTION.SOUTH),
        door_4 = entrance(0x2a, 0x01, DIRECTION.SOUTH),
        door_5 = entrance(0x2a, 0x01, DIRECTION.SOUTH),
    }

    enum stepon_trigger {
        door_1_1_back = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        door_1_1 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        door_2_1 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        door_2_2 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        door_2_3 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
    }

    fun block_market(block) {
        if(block) {
            object[0x1a] = 0x01;
        }  else {
            object[0x1a] = 0x00;
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

map tower_top_half(0x7c) {
    enum entrance {
        north = entrance(0x40, 0x0b, DIRECTION.SOUTH),
        south = entrance(0x20, 0x77, DIRECTION.NORTH),

        door_1_1_left = entrance(0x2c, 0x63, DIRECTION.SOUTH),
        door_1_1_right = entrance(0x44, 0x63, DIRECTION.SOUTH),
        door_1_2 = entrance(0x74, 0x63, DIRECTION.SOUTH),
        door_1_3 = entrance(0xa2, 0x63, DIRECTION.SOUTH),
        door_1_3_back = entrance(0x92, 0x4b, DIRECTION.WEST),
        door_2_1 = entrance(0x8e, 0x29, DIRECTION.SOUTH),
        door_2_1_back = entrance(0xb7, 0x1f, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        door_1_1_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        door_1_1_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        door_1_2 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        door_1_3 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        door_2_1 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        stepon_8 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        door_2_1_back = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        door_1_3_back = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map castle_dungeon(0x74) {
    enum entrance {
        door = entrance(0x2e, 0x11, DIRECTION.SOUTH),
        cave_1 = entrance(0x18, 0x1d, DIRECTION.SOUTH),
        cave_2 = entrance(0x47, 0x11, DIRECTION.SOUTH),
        cave_3 = entrance(0x56, 0x39, DIRECTION.SOUTH),
        // ???
        cave_5 = entrance(0x47, 0x3d, DIRECTION.SOUTH),
        cave_6 = entrance(0x21, 0x39, DIRECTION.SOUTH),
        cave_7 = entrance(0x0c, 0x2f, DIRECTION.SOUTH),
    }

    fun door_triggered() {
        object[0x06] = 0x01; // opens door
    }

    fun open_gate(index) {
        if(index == 0x01) {
            object[0x00] = 0x01; // press switch_1

            object[0x01] = 0x01; // opens gate_1
            sleep(0x10);
            object[0x01] = 0x02; // opens gate_1
            sleep(0x10);
            object[0x01] = 0x03; // opens gate_1
            sleep(0x10);
            object[0x01] = 0x7e; // opens gate_1
        } else if(index == 0x02) {
            object[0x08] = 0x01; // press switch_2

            object[0x07] = 0x01; // opens gate_2
            sleep(0x10);
            object[0x07] = 0x02; // opens gate_2
            sleep(0x10);
            object[0x07] = 0x03; // opens gate_2
            sleep(0x10);
            object[0x07] = 0x7e; // opens gate_2
        } else if(index == 0x03) {
            object[0x0a] = 0x01; // press switch_3

            object[0x09] = 0x01; // opens gate_3
            sleep(0x10);
            object[0x09] = 0x02; // opens gate_3
            sleep(0x10);
            object[0x09] = 0x03; // opens gate_3
            sleep(0x10);
            object[0x09] = 0x7e; // opens gate_3
        } else if(index == 0x04) {
            object[0x0e] = 0x01; // press switch_4

            object[0x0c] = 0x01; // opens gate_4
            sleep(0x10);
            object[0x0c] = 0x02; // opens gate_4
            sleep(0x10);
            object[0x0c] = 0x03; // opens gate_4
            sleep(0x10);
            object[0x0c] = 0x7e; // opens gate_4
        } else if(index == 0x05) {
            object[0x0d] = 0x01; // press switch_5

            object[0x0b] = 0x01; // opens gate_5
            sleep(0x10);
            object[0x0b] = 0x02; // opens gate_5
            sleep(0x10);
            object[0x0b] = 0x03; // opens gate_5
            sleep(0x10);
            object[0x0b] = 0x7e; // opens gate_5
        } else if(index == 0x06) {
            object[0x05] = 0x01; // press switch_6

            object[0x04] = 0x01; // opens gate_6
            sleep(0x10);
            object[0x04] = 0x02; // opens gate_6
            sleep(0x10);
            object[0x04] = 0x03; // opens gate_6
            sleep(0x10);
            object[0x04] = 0x7e; // opens gate_6
        } else if(index == 0x07) {
            object[0x03] = 0x01; // press switch_7

            object[0x02] = 0x01; // opens gate_7
            sleep(0x10);
            object[0x02] = 0x02; // opens gate_7
            sleep(0x10);
            object[0x02] = 0x03; // opens gate_7
            sleep(0x10);
            object[0x02] = 0x7e; // opens gate_7
        }
    }
    
    enum stepon_trigger {
        switch_6 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        switch_5 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        switch_4 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        switch_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        switch_2 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        switch_7 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        switch_1 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        exit_door = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        stepon_8 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        stepon_9 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        stepon_10 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        stepon_11 = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        stepon_12 = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        stepon_13 = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        stepon_14 = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        pipe_3_1 = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        pipe_1_1 = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
        pipe_2_1 = @install() fun test() {
            subtext(string("exit? 17 [END]"));
        },
        pipe_2_2 = @install() fun test() {
            subtext(string("exit? 18 [END]"));
        },
        pipe_2_3 = @install() fun test() {
            subtext(string("exit? 19 [END]"));
        },

        pipe_1_2 = @install() fun test() {
            subtext(string("exit? 20 [END]"));
        },
        pipe_1_3 = @install() fun test() {
            subtext(string("exit? 21 [END]"));
        },
        pipe_1_4 = @install() fun test() {
            subtext(string("exit? 22 [END]"));
        },
        pipe_3_2 = @install() fun test() {
            subtext(string("exit? 23 [END]"));
        },
        pipe_3_3 = @install() fun test() {
            subtext(string("exit? 24 [END]"));
        },
        pipe_3_4 = @install() fun test() {
            subtext(string("exit? 25 [END]"));
        },
        stepon_26 = @install() fun test() {
            subtext(string("exit? 26 [END]"));
        },
        stepon_27 = @install() fun test() {
            subtext(string("exit? 27 [END]"));
        },
        stepon_28 = @install() fun test() {
            subtext(string("exit? 28 [END]"));
        },
        stepon_29 = @install() fun test() {
            subtext(string("exit? 29 [END]"));
        },

        stepon_30 = @install() fun test() {
            subtext(string("exit? 30 [END]"));
        },
        stepon_31 = @install() fun test() {
            subtext(string("exit? 31 [END]"));
        },
    }

    enum b_trigger {
        cell_1_gourd = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
    }

    fun trigger_enter() {
        // object[0x06] = 0x01; // opens door
        // object[0x01] = 0x7e; // opens gate_1
        // object[0x07] = 0x7e; // opens gate_2
        // object[0x09] = 0x7e; // opens gate_3
        // object[0x0c] = 0x7e; // opens gate_4
        // object[0x0b] = 0x7e; // opens gate_5
        // object[0x04] = 0x7e; // opens gate_6
        // object[0x02] = 0x7e; // opens gate_7

        // object[0x00] = 0x01; // press switch_1
        // object[0x08] = 0x01; // press switch_2
        // object[0x0a] = 0x01; // press switch_3
        // object[0x0e] = 0x01; // press switch_4
        // object[0x0d] = 0x01; // press switch_5
        // object[0x05] = 0x01; // press switch_6
        // object[0x03] = 0x01; // press switch_7

        // object[0x0f] ???

        // object[0x12] = 0x7e; // drain pipe_1
        // object[0x13] = 0x7e; // drain pipe_2
        // object[0x10] = 0x7e; // drain pipe_3
        // object[0x11] = 0x7e; // drain pipe_4
        // object[0x14] = 0x7e; // drain pipe_5

        fade_in();
    }
};

map sewers_1(0x12) {
    enum entrance {
        door = entrance(0x7a, 0x0b, DIRECTION.SOUTH),
        pipe = entrance(0x97, 0x0b, DIRECTION.SOUTH),
    }

    enum stepon_trigger {
        exit_door = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_pipe = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();

        // object[0x00] = 0x01 // hide barrier_7
        // object[0x01] = 0x01 // hide barrier_1
        // object[0x02] = 0x01 // hide barrier_2
        // object[0x03] = 0x01 // hide barrier_8
        // object[0x04] = 0x01 // hide barrier_3
        // object[0x05] = 0x01 // hide barrier_4
        // object[0x06] = 0x01 // hide barrier_6
        // object[0x07] = 0x01 // hide barrier_5
        // object[0x08] = 0x01 // open door
        // object[0x09] = 0x01 // open chest_1_1
        // object[0x0a] = 0x01 // open chest_1_2
        // object[0x0b] = 0x01 // open chest_1_3
        // object[0x0c] = 0x01 // open chest_2_1
        // object[0x0d] = 0x01 // open chest_2_2
    }
};

map sewers_2(0x79) {
    enum entrance {
        door = entrance(0x66, 0x0d, DIRECTION.SOUTH),
        pipe = entrance(0x49, 0x0d, DIRECTION.SOUTH),

        east = entrance(0xdf, 0x66, DIRECTION.WEST),
    }

    enum stepon_trigger {
        exit_pipe = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_door = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_east_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_east_1 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();

        // object[0x00] = 0x01; // open door
        // object[0x01] = 0x01; // open chest_4_1
        // object[0x02] = 0x01; // open chest_4_2
        // object[0x03] = 0x01; // open chest_3_1
        // object[0x04] = 0x01; // open chest_3_2
        // object[0x05] = 0x01; // open chest_3_3
        // object[0x06] = 0x01; // open chest_2
        // object[0x07] = 0x01; // open chest_1_1
        // object[0x08] = 0x01; // open chest_1_2
    }
};

map castle_bridges(0x70) {
    enum entrance {
        east = entrance(0x8b, 0x28, DIRECTION.WEST),
        west = entrance(0x01, 0x29, DIRECTION.EAST),

        door_east = entrance(0x45, 0x39, DIRECTION.EAST),
        door_west = entrance(0x35, 0x39, DIRECTION.WEST),

        balcony_east_1 = entrance(0x4f, 0x0f, DIRECTION.EAST),
        balcony_east_2 = entrance(0x4f, 0x19, DIRECTION.EAST),
        balcony_east_3 = entrance(0x4f, 0x23, DIRECTION.EAST),

        balcony_west_1 = entrance(0x3f, 0x0f, DIRECTION.WEST),
        balcony_west_2 = entrance(0x3f, 0x19, DIRECTION.WEST),
        balcony_west_3 = entrance(0x3f, 0x23, DIRECTION.WEST),
    }

    enum stepon_trigger {
        exit_door_east = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_door_west = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        balcony_east_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        balcony_east_2 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        balcony_east_1 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        balcony_west_1 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        balcony_west_2 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        balcony_west_3 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map balconies(0x72) {
    enum entrance {
        balcony_east_1 = entrance(0x75, 0x1a, DIRECTION.WEST),
        balcony_east_2 = entrance(0x75, 0x3c, DIRECTION.WEST),
        balcony_east_3 = entrance(0x75, 0x5e, DIRECTION.WEST),

        balcony_west_1 = entrance(0x05, 0x5e, DIRECTION.EAST),
        balcony_west_1 = entrance(0x05, 0x3c, DIRECTION.EAST),
        balcony_west_1 = entrance(0x05, 0x1a, DIRECTION.EAST),

        stairs_east = entrance(0x45, 0x39, DIRECTION.EAST),
        stairs_west = entrance(0x35, 0x39, DIRECTION.WEST),

        vent_east_1 = entrance(0x67, 0x23, DIRECTION.NONE),
        vent_east_2 = entrance(0x67, 0x67, DIRECTION.NONE),

        vent_west_1 = entrance(0x13, 0x67, DIRECTION.NONE),
        vent_west_2 = entrance(0x13, 0x45, DIRECTION.NONE),
        vent_west_3 = entrance(0x13, 0x23, DIRECTION.NONE),
    }

    enum stepon_trigger {
        door_west_3 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        door_west_2 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        door_west_1 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        door_east_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        door_east_2 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        door_east_1 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        vent_west_2 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        vent_west_1 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        vent_west_1 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        vent_west_2 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        vent_west_3 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        stairs_east = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        stairs_west = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        balcony_east_3 = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        balcony_east_2 = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        balcony_east_1 = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        balcony_west_1 = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
        balcony_west_2 = @install() fun test() {
            subtext(string("exit? 17 [END]"));
        },
        balcony_west_3 = @install() fun test() {
            subtext(string("exit? 18 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map dark_forest(0x22) {
    enum entrance {
        room_1_east = entrance(0x35, 0x16, DIRECTION.WEST),
        room_1_north = entrance(0x18, 0x1f, DIRECTION.NORTH),
        room_1_west = entrance(0x00, 0x15, DIRECTION.EAST),

        room_2_east = entrance(0x6f, 0x17, DIRECTION.WEST),
        room_2_south_1 = entrance(0x65, 0x1f, DIRECTION.NORTH),
        room_2_south_2 = entrance(0x46, 0x1f, DIRECTION.NORTH),
        room_2_west = entrance(0x38, 0x18, DIRECTION.EAST),

        room_3_north = entrance(0x5f, 0x25, DIRECTION.SOUTH),
        room_3_west = entrance(0x4b, 0x4c, DIRECTION.EAST),
        room_3_south = entrance(0x5a, 0x55, DIRECTION.NORTH),

        room_4_north = entrance(0x39, 0x24, DIRECTION.SOUTH),
        room_4_east = entrance(0x48, 0x4b, DIRECTION.WEST),
        room_4_west = entrance(0x26, 0x4e, DIRECTION.EAST),

        room_5_north = entrance(0x11, 0x25, DIRECTION.SOUTH),
        room_5_east = entrance(0x22, 0x38, DIRECTION.WEST),
        room_5_south = entrance(0x11, 0x55, DIRECTION.NORTH),
        room_5_west = entrance(0x00, 0x38, DIRECTION.EAST),
        room_5_center = entrance(0x12, 0x38, DIRECTION.NONE),
    }

    enum stepon_trigger {
        exit_room_3_south = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_room_4_west = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_room_1_west = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_room_1_east = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_room_1_south = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_room_2_south_2 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        exit_room_2_east = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_room_5_west = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        exit_room_5_east = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        exit_room_5_north = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        exit_room_5_south = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        exit_room_4_north = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        exit_room_3_north = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        exit_room_4_east = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        exit_room_3_west = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        exit_room_2_south_1 = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        room_2_sign = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        room_1_sign = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        room_3_sniff = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        room_5_sniff = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        room_1_sniff = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        room_2_sniff = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
    }

    fun prepare_room(index) {
        if(index == 0x01) {
            init_map(0x00, 0x00, 0x34, 0x1e); // room_1
        } else if(index == 0x02) {
            init_map(0x38, 0x00, 0x6e, 0x1e); // room 2
        } else if(index == 0x03) {
            init_map(0x4c, 0x24, 0x6e, 0x54); // room_3
        } else if(index == 0x04) {
            init_map(0x26, 0x24, 0x48, 0x54); // room_4
        } else if(index == 0x05) {
            init_map(0x00, 0x24, 0x22, 0x54); // room_5
        }
    }

    fun trigger_enter() {
        fade_in();

        // object[0x00] = 0x01; // opens room_1_south
        // object[0x01] = 0x01; // closes room_1_east
        // object[0x12] = 0x01; // hides room_1_sign
        // object[0x09] = 0x01; // shows room_1_decoration (stone)

        // object[0x02] = 0x01; // hides room_2_sign
        // object[0x02] = 0x02; // closes room_2_west
        // object[0x02] = 0x03; // opens room_2_west, closes room_2_south
        // object[0x03] = 0x01; // opens room_2_south_1
        // object[0x0a] = 0x01; // shows room_2_decoration (stone -> tree)
        
        // object[0x08] = 0x01; // opens room_3_south, closes room_3_west
        // object[0x08] = 0x02; // closes room_3_west
        // object[0x0f] = 0x01; // shows room_3_decoration_1 (sign)
        // object[0x10] = 0x01; // shows room_3_decoration_2 (stone)
        // object[0x11] = 0x01; // shows room_3_decoration_3 (tree)
        // object[0x13] = 0x01; // closes room_3_north

        // object[0x06] = 0x01; // closes room_4_north
        // object[0x07] = 0x01; // opens room_4_west
        // object[0x0e] = 0x01; // shows room_4_decoration (stone)

        // object[0x04] = 0x01; // opens room_5_west
        // object[0x05] = 0x01; // opens room_5_east
        // object[0x0b] = 0x01; // shows room_5_decoration_1 (sign)
        // object[0x0c] = 0x01; // shows room_5_decoration_2 (tree)
        // object[0x0d] = 0x01; // shows room_5_decoration_3 (stone)
    }
};
map dark_forest_room_1(0x22) { // variation: "--", ",-", "<-"
    enum entrance {
        east = entrance(0x35, 0x16, DIRECTION.WEST),
        south = entrance(0x18, 0x1f, DIRECTION.NORTH),
        west = entrance(0x00, 0x15, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_room_3_south = nop(),
        exit_room_4_west = nop(),
        exit_west = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        exit_room_2_south_2 = nop(),
        exit_room_2_east = nop(),
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_room_5_west = nop(),
        exit_room_5_east = nop(),

        exit_room_5_north = nop(),
        exit_room_5_south = nop(),
        exit_room_4_north = nop(),
        exit_room_3_north = nop(),
        exit_room_4_east = nop(),
        exit_room_3_west = nop(),
        exit_room_2_south_1 = nop(),
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        room_2_sign = nop(),
        sign = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        room_3_sniff = nop(),
        room_5_sniff = nop(),
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        sniff = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        room_2_sniff = nop(),
    }

    fun prepare_room(index) {
        if(index == 0x01) {
            init_map(0x00, 0x00, 0x34, 0x1e); // room_1
        } else if(index == 0x02) {
            init_map(0x38, 0x00, 0x6e, 0x1e); // room 2
        } else if(index == 0x03) {
            init_map(0x4c, 0x24, 0x6e, 0x54); // room_3
        } else if(index == 0x04) {
            init_map(0x26, 0x24, 0x48, 0x54); // room_4
        } else if(index == 0x05) {
            init_map(0x00, 0x24, 0x22, 0x54); // room_5
        }
    }

    fun trigger_enter() {
        prepare_room(0x01);
        fade_in();

        // object[0x00] = 0x01; // opens room_1_south
        // object[0x01] = 0x01; // closes room_1_east
        // object[0x12] = 0x01; // hides room_1_sign
        // object[0x09] = 0x01; // shows room_1_decoration (stone)
    }
};
map dark_forest_room_2(0x22) { // variation: ",-", ",-,"
    enum entrance {
        east = entrance(0x6f, 0x17, DIRECTION.WEST),
        south_1 = entrance(0x65, 0x1f, DIRECTION.NORTH),
        south_2 = entrance(0x46, 0x1f, DIRECTION.NORTH),
        west = entrance(0x38, 0x18, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_room_3_south = nop(),
        exit_room_4_west = nop(),
        exit_room_1_west = nop(),
        exit_room_1_east = nop(),
        exit_room_1_south = nop(),
        south_2 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        east = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_room_5_west = nop(),
        exit_room_5_east = nop(),

        exit_room_5_north = nop(),
        exit_room_5_south = nop(),
        exit_room_4_north = nop(),
        exit_room_3_north = nop(),
        exit_room_4_east = nop(),
        exit_room_3_west = nop(),
        south_1 = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        room_2_sign = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        room_1_sign = nop(),
        room_3_sniff = nop(),
        room_5_sniff = nop(),
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        room_1_sniff = nop(),
        sniff = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
    }

    fun prepare_room(index) {
        if(index == 0x01) {
            init_map(0x00, 0x00, 0x34, 0x1e); // room_1
        } else if(index == 0x02) {
            init_map(0x38, 0x00, 0x6e, 0x1e); // room 2
        } else if(index == 0x03) {
            init_map(0x4c, 0x24, 0x6e, 0x54); // room_3
        } else if(index == 0x04) {
            init_map(0x26, 0x24, 0x48, 0x54); // room_4
        } else if(index == 0x05) {
            init_map(0x00, 0x24, 0x22, 0x54); // room_5
        }
    }

    fun trigger_enter() {
        prepare_room(0x02);
        fade_in();
        
        // object[0x02] = 0x01; // hides room_2_sign
        // object[0x02] = 0x02; // closes room_2_west
        // object[0x02] = 0x03; // opens room_2_west, closes room_2_south
        // object[0x03] = 0x01; // opens room_2_south_1
        // object[0x0a] = 0x01; // shows room_2_decoration (stone -> tree)
    }
};
map dark_forest_room_3(0x22) { // variation: "^", "_|"
    enum entrance {
        north = entrance(0x5f, 0x25, DIRECTION.SOUTH),
        west = entrance(0x4b, 0x4c, DIRECTION.EAST),
        south = entrance(0x5a, 0x55, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        exit_south = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_room_4_west = nop(),
        exit_room_1_west = nop(),
        exit_room_1_east = nop(),
        exit_room_1_south = nop(),
        exit_room_2_south_2 = nop(),
        exit_room_2_east = nop(),
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_room_5_west = nop(),
        exit_room_5_east = nop(),

        exit_room_5_north = nop(),
        exit_room_5_south = nop(),
        exit_room_4_north = nop(),
        exit_north = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        exit_room_4_east = nop(),
        exit_room_3_west = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        exit_room_2_south_1 = nop(),
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        room_2_sign = nop(),
        room_1_sign = nop(),
        sniff = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        room_5_sniff = nop(),
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        room_1_sniff = nop(),
        room_2_sniff = nop(),
    }

    fun prepare_room(index) {
        if(index == 0x01) {
            init_map(0x00, 0x00, 0x34, 0x1e); // room_1
        } else if(index == 0x02) {
            init_map(0x38, 0x00, 0x6e, 0x1e); // room 2
        } else if(index == 0x03) {
            init_map(0x4c, 0x24, 0x6e, 0x54); // room_3
        } else if(index == 0x04) {
            init_map(0x26, 0x24, 0x48, 0x54); // room_4
        } else if(index == 0x05) {
            init_map(0x00, 0x24, 0x22, 0x54); // room_5
        }
    }

    fun trigger_enter() {
        prepare_room(0x03);
        fade_in();

        // object[0x08] = 0x01; // opens room_3_south, closes room_3_west
        // object[0x08] = 0x02; // closes room_3_west
        // object[0x0f] = 0x01; // shows room_3_decoration_1 (sign)
        // object[0x10] = 0x01; // shows room_3_decoration_2 (stone)
        // object[0x11] = 0x01; // shows room_3_decoration_3 (tree)
        // object[0x13] = 0x01; // closes room_3_north
    }
};
map dark_forest_room_4(0x22) { // variation: "L"
    enum entrance {
        north = entrance(0x39, 0x24, DIRECTION.SOUTH),
        east = entrance(0x48, 0x4b, DIRECTION.WEST),
        west = entrance(0x26, 0x4e, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_room_3_south = nop(),
        exit_west = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_room_1_west = nop(),
        exit_room_1_east = nop(),
        exit_room_1_south = nop(),
        exit_room_2_south_2 = nop(),
        exit_room_2_east = nop(),
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_room_5_west = nop(),
        exit_room_5_east = nop(),

        exit_room_5_north = nop(),
        exit_room_5_south = nop(),
        exit_north = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        exit_room_3_north = nop(),
        exit_east = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        exit_room_3_west = nop(),
        exit_room_2_south_1 = nop(),
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        room_2_sign = nop(),
        room_1_sign = nop(),
        room_3_sniff = nop(),
        room_5_sniff = nop(),
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        room_1_sniff = nop(),
        room_2_sniff = nop(),
    }

    fun prepare_room(index) {
        if(index == 0x01) {
            init_map(0x00, 0x00, 0x34, 0x1e); // room_1
        } else if(index == 0x02) {
            init_map(0x38, 0x00, 0x6e, 0x1e); // room 2
        } else if(index == 0x03) {
            init_map(0x4c, 0x24, 0x6e, 0x54); // room_3
        } else if(index == 0x04) {
            init_map(0x26, 0x24, 0x48, 0x54); // room_4
        } else if(index == 0x05) {
            init_map(0x00, 0x24, 0x22, 0x54); // room_5
        }
    }

    fun trigger_enter() {
        prepare_room(0x04);
        fade_in();

        // object[0x06] = 0x01; // closes room_4_north
        // object[0x07] = 0x01; // opens room_4_west
        // object[0x0e] = 0x01; // shows room_4_decoration (stone)
    }
};
map dark_forest_room_5(0x22) { // variation
    enum entrance {
        north = entrance(0x11, 0x25, DIRECTION.SOUTH),
        east = entrance(0x22, 0x38, DIRECTION.WEST),
        south = entrance(0x11, 0x55, DIRECTION.NORTH),
        west = entrance(0x00, 0x38, DIRECTION.EAST),

        center = entrance(0x12, 0x38, DIRECTION.NONE),
    }

    enum stepon_trigger {
        exit_room_3_south = nop(),
        exit_room_4_west = nop(),
        exit_room_1_west = nop(),
        exit_room_1_east = nop(),
        exit_room_1_south = nop(),
        exit_room_2_south_2 = nop(),
        exit_room_2_east = nop(),
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        exit_north = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        exit_room_4_north = nop(),
        exit_room_3_north = nop(),
        exit_room_4_east = nop(),
        exit_room_3_west = nop(),
        exit_room_2_south_1 = nop(),
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        room_2_sign = nop(),
        room_1_sign = nop(),
        room_3_sniff = nop(),
        sniff = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        room_1_sniff = nop(),
        room_2_sniff = nop(),
    }

    fun prepare_room(index) {
        if(index == 0x01) {
            init_map(0x00, 0x00, 0x34, 0x1e); // room_1
        } else if(index == 0x02) {
            init_map(0x38, 0x00, 0x6e, 0x1e); // room 2
        } else if(index == 0x03) {
            init_map(0x4c, 0x24, 0x6e, 0x54); // room_3
        } else if(index == 0x04) {
            init_map(0x26, 0x24, 0x48, 0x54); // room_4
        } else if(index == 0x05) {
            init_map(0x00, 0x24, 0x22, 0x54); // room_5
        }
    }

    fun trigger_enter() {
        prepare_room(0x05);
        fade_in();

        // object[0x04] = 0x01; // opens room_5_west
        // object[0x05] = 0x01; // opens room_5_east
        // object[0x0b] = 0x01; // shows room_5_decoration_1 (sign)
        // object[0x0c] = 0x01; // shows room_5_decoration_2 (tree)
        // object[0x0d] = 0x01; // shows room_5_decoration_3 (stone)
    }
};

map between(0x13) {
    enum entrance {
        north = entrance(0x17, 0x01, DIRECTION.SOUTH),
        east = entrance(0x2b, 0x11, DIRECTION.WEST),
        west = entrance(0x06, 0x18, DIRECTION.EAST),
    }

    enum stepon_trigger {
        exit_west = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_north = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
    }

    enum b_trigger {
        barrier = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map sewers_landing_spot(0x7a) {
    enum entrance {
        west = entrance(0x05, 0x0b, DIRECTION.EAST),
        cinematic_west = entrance(0x2d, 0x7, DIRECTION.NONE),
    }

    enum stepon_trigger {
        pipe = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map stairs(0x1a) {
    enum entrance {
        stairs_east_top = entrance(0x43, 0x03, DIRECTION.SOUTH),
        stairs_west_top = entrance(0x15, 0x05, DIRECTION.SOUTH),
        stairs_west_bottom = entrance(0x5f, 0xa1, DIRECTION.NORTH),
    }

    enum stepon_trigger {
        cutscene_energy_core = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_stairs_west_bottom = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_stairs_west_top = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        exit_stairs_east_top = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
    }

    enum b_trigger {
        pickup_energy_core = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
    }

    fun trigger_enter() {
        // object[0x00] = 0x7e; // remove energy_core_hitbox

        fade_in();
    }
};

map footknight(0x19) {
    enum entrance {
        east = entrance(0x93, 0x42, DIRECTION.WEST),
        west = entrance(0x01, 0x42, DIRECTION.EAST),
        stairs_east = entrance(0x53, 0x4c, DIRECTION.WEST),
        stairs_west = entrance(0x40, 0x40, DIRECTION.EAST) // 0x4c, 0x40
    }

    enum stepon_trigger {
        stairs_east = @install() fun test() {
            subtext(string("exit? 0 [END]"));
            map_transition(footknight, stairs_west, DIRECTION.EAST);
        },
        spawn_boss = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 2 [END]"));
            map_transition(footknight, east, DIRECTION.WEST);
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 3 [END]"));
            map_transition(footknight, west, DIRECTION.EAST);
        },
        stairs_west = @install() fun test() {
            subtext(string("exit? 4 [END]"));
            map_transition(footknight, stairs_east, DIRECTION.WEST);
        }
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        }
    }

    fun trigger_enter() {
        // object[0x00] = 0x7e; // close stairs_west
        // object[0x01] = 0x7e; // close stairs_east
        // object[0x02] = 0x01; // close wall_2
        // object[0x03] = 0x01; // close wall_1
        // object[0x04] = 0x01; // remove bridge_east
        // object[0x05] = 0x01; // remove bridge_west

        fade_in();
    }
};

map bad_boys(0x1f) {
    enum entrance {
        east = entrance(0x63, 0x1d, DIRECTION.WEST),
        west = entrance(0x01, 0x21, DIRECTION.EAST)
    }

    enum stepon_trigger {
        exit_east = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        }
    }

    fun open_east_exit(open) {
        if(open) {
           object[0x00] = 0x00; 
        } else {
            object[0x00] = 0x7e;
        }
    }
    fun open_bridge(open) {
        if(open) {
           object[0x07] = 0x07e; 
        } else {
            object[0x07] = 0x00;
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

map timberdrake(0x20) {
    enum entrance {
        east = entrance(0x2b, 0x15, DIRECTION.WEST),
        south = entrance(0x1b, 0x29, DIRECTION.NORTH)
    }

    enum stepon_trigger {
        exit_east = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        }
    }

    fun trigger_enter() {
        fade_in();

        // object[0x00] = 0x01; // close south
        // object[0x01] = 0x01; // open east
    }
};

map gomis_swamp(0x40) {
    enum entrance {
        north = entrance(0x0b, 0x01, DIRECTION.SOUTH),
        south = entrance(0x1b, 0x53, DIRECTION.NORTH)
    }

    enum stepon_trigger {
        exit_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};


map verminator(0x5e) {
    enum entrance {
        north = entrance(0x16, 0x09, DIRECTION.SOUTH),
        east = entrance(0x29, 0x38, DIRECTION.WEST),
        south = entrance(0x16, 0x65, DIRECTION.NORTH),
        west = entrance(0x03, 0x38, DIRECTION.EAST),
        stairs = entrance(0x19, 0x4d, DIRECTION.EAST)
    }

    enum stepon_trigger {
        exit_north = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        stepon_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        stepon_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        stepon_4 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        spawn_boss = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        exit_stairs = @install() fun test() {
            subtext(string("exit? 6 [END]"));
            map_transition(verminator, south, DIRECTION.WEST);
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 7 [END]"));
            map_transition(verminator, north, DIRECTION.SOUTH);
        },
        exit_west = @install() fun test() {
            subtext(string("exit? 8 [END]"));
            map_transition(verminator, east, DIRECTION.WEST);
        },
        exit_east = @install() fun test() {
            subtext(string("exit? 9 [END]"));
            map_transition(verminator, west, DIRECTION.EAST);
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

map storage_room(0x60) {
    enum entrance {
        stairs = entrance(0x29, 0x0d, DIRECTION.WEST)
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
    }

    fun trigger_enter() {
        fade_in();
    }
};

map sterling(0x37) {
    enum entrance {
        south = entrance(0x55, 0xf9, DIRECTION.NORTH),
        platform = entrance(0x51, 0x2f, DIRECTION.NORTH)
    }

    enum stepon_trigger {
        elevator_bottom = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        elevator_top = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        spawn_boss = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        trapdoor_4 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        exit_south = @install() fun test() {
            subtext(string("exit? 4 [END]"));
            map_transition(sterling, platform, DIRECTION.SOUTH);
        },
        trapdoor_1 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        stepon_6 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        trapdoor_2 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        stepon_9 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        trapdoor_3 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        stepon_11 = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        }
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        b_trigger_8 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        b_trigger_9 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        b_trigger_10 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        b_trigger_11 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        b_trigger_12 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        b_trigger_13 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        b_trigger_14 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        b_trigger_15 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        b_trigger_16 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        b_trigger_17 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        b_trigger_18 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        b_trigger_19 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        b_trigger_20 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        b_trigger_21 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        }
    }

    fun trigger_enter() {
        // object[0x00] = 0x01; // open chest_2
        // object[0x01] = 0x01; // open elevator_bottom
        // object[0x02] = 0x01; // open chest_3
        // object[0x03] = 0x01; // activate trapdoor_3
        // object[0x04] = 0x01; // open elevator_top
        // object[0x05] = 0x03; // activate trapdoor_2
        // object[0x06] = 0x03; // activate trapdoor_4
        // object[0x07] = 0x03; // activate trapdoor_1
        // object[0x08] = 0x01; // open chest_1
        // object[0x09] = 0x01; // open chest_4
        // object[0x0a] = 0x01; // block elevator_top

        fade_in();
    }
};

map mungola(0x77) {
    enum entrance {
        east_1 = entrance(0x39, 0x15, DIRECTION.WEST),
        east_2 = entrance(0x39, 0x24, DIRECTION.WEST)
    }

    enum stepon_trigger {
        stairs = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        exit_east_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        exit_east_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

// act 4

map junkyard(0x49) {
    enum entrance {
        crash = entrance(0x3a, 0x4e, DIRECTION.NONE)
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        stepon_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        stepon_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        stepon_4 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        stepon_5 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        stepon_6 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        stepon_8 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        stepon_9 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        stepon_10 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        stepon_11 = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        stepon_12 = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
    }
    
    fun trigger_enter() {
        fade_in();
    }
};

map metro(0x48) {
    enum entrance {
        south = entrance(0x3a, 0x4e, DIRECTION.NONE)
    }

    enum stepon_trigger {
        stepon_0 = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        stepon_1 = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        },
        stepon_2 = @install() fun test() {
            subtext(string("exit? 2 [END]"));
        },
        stepon_3 = @install() fun test() {
            subtext(string("exit? 3 [END]"));
        },
        stepon_4 = @install() fun test() {
            subtext(string("exit? 4 [END]"));
        },
        stepon_5 = @install() fun test() {
            subtext(string("exit? 5 [END]"));
        },
        stepon_6 = @install() fun test() {
            subtext(string("exit? 6 [END]"));
        },
        stepon_7 = @install() fun test() {
            subtext(string("exit? 7 [END]"));
        },
        stepon_8 = @install() fun test() {
            subtext(string("exit? 8 [END]"));
        },
        stepon_9 = @install() fun test() {
            subtext(string("exit? 9 [END]"));
        },

        stepon_10 = @install() fun test() {
            subtext(string("exit? 10 [END]"));
        },
        stepon_11 = @install() fun test() {
            subtext(string("exit? 11 [END]"));
        },
        stepon_12 = @install() fun test() {
            subtext(string("exit? 12 [END]"));
        },
        stepon_13 = @install() fun test() {
            subtext(string("exit? 13 [END]"));
        },
        stepon_14 = @install() fun test() {
            subtext(string("exit? 14 [END]"));
        },
        stepon_15 = @install() fun test() {
            subtext(string("exit? 15 [END]"));
        },
        stepon_16 = @install() fun test() {
            subtext(string("exit? 16 [END]"));
        },
        stepon_17 = @install() fun test() {
            subtext(string("exit? 17 [END]"));
        },
        stepon_18 = @install() fun test() {
            subtext(string("exit? 18 [END]"));
        },
        stepon_19 = @install() fun test() {
            subtext(string("exit? 19 [END]"));
        },

        stepon_20 = @install() fun test() {
            subtext(string("exit? 20 [END]"));
        },
        stepon_21 = @install() fun test() {
            subtext(string("exit? 21 [END]"));
        },
        stepon_22 = @install() fun test() {
            subtext(string("exit? 22 [END]"));
        },
        stepon_23 = @install() fun test() {
            subtext(string("exit? 23 [END]"));
        },
        stepon_24 = @install() fun test() {
            subtext(string("exit? 24 [END]"));
        },
        stepon_25 = @install() fun test() {
            subtext(string("exit? 25 [END]"));
        },
        stepon_26 = @install() fun test() {
            subtext(string("exit? 26 [END]"));
        },
        stepon_27 = @install() fun test() {
            subtext(string("exit? 27 [END]"));
        },
        stepon_28 = @install() fun test() {
            subtext(string("exit? 28 [END]"));
        },
        stepon_29 = @install() fun test() {
            subtext(string("exit? 29 [END]"));
        },

        stepon_30 = @install() fun test() {
            subtext(string("exit? 30 [END]"));
        },
        stepon_31 = @install() fun test() {
            subtext(string("exit? 31 [END]"));
        },
        stepon_32 = @install() fun test() {
            subtext(string("exit? 32 [END]"));
        },
        stepon_33 = @install() fun test() {
            subtext(string("exit? 33 [END]"));
        },
        stepon_34 = @install() fun test() {
            subtext(string("exit? 34 [END]"));
        },
        stepon_35 = @install() fun test() {
            subtext(string("exit? 35 [END]"));
        },
        stepon_36 = @install() fun test() {
            subtext(string("exit? 36 [END]"));
        },
        stepon_37 = @install() fun test() {
            subtext(string("exit? 37 [END]"));
        },
        stepon_38 = @install() fun test() {
            subtext(string("exit? 38 [END]"));
        },
        stepon_39 = @install() fun test() {
            subtext(string("exit? 39 [END]"));
        },

        stepon_40 = @install() fun test() {
            subtext(string("exit? 40 [END]"));
        },
        stepon_41 = @install() fun test() {
            subtext(string("exit? 41 [END]"));
        },
        stepon_42 = @install() fun test() {
            subtext(string("exit? 42 [END]"));
        },
        stepon_43 = @install() fun test() {
            subtext(string("exit? 43 [END]"));
        },
        stepon_44 = @install() fun test() {
            subtext(string("exit? 44 [END]"));
        },
        stepon_45 = @install() fun test() {
            subtext(string("exit? 45 [END]"));
        },
        stepon_46 = @install() fun test() {
            subtext(string("exit? 46 [END]"));
        },
        stepon_47 = @install() fun test() {
            subtext(string("exit? 47 [END]"));
        },
        stepon_48 = @install() fun test() {
            subtext(string("exit? 48 [END]"));
        },
        stepon_49 = @install() fun test() {
            subtext(string("exit? 49 [END]"));
        },

        stepon_50 = @install() fun test() {
            subtext(string("exit? 50 [END]"));
        },
        stepon_51 = @install() fun test() {
            subtext(string("exit? 51 [END]"));
        },
        stepon_52 = @install() fun test() {
            subtext(string("exit? 52 [END]"));
        },
        stepon_53 = @install() fun test() {
            subtext(string("exit? 53 [END]"));
        },
        stepon_54 = @install() fun test() {
            subtext(string("exit? 54 [END]"));
        },
        stepon_55 = @install() fun test() {
            subtext(string("exit? 55 [END]"));
        },
    }

    enum b_trigger {
        door_center = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        dog_door_in_d1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        dog_door_out_d1 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        dog_door_out_d2 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        dog_door_in_d2 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        dog_door_out_d3 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        dog_door_in_d3 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        dog_door_out_d4 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        },
        dog_door_in_d4 = @install() fun test() {
            subtext(string("b? 8 [END]"));
        },
        dog_door_out_c4 = @install() fun test() {
            subtext(string("b? 9 [END]"));
        },

        dog_door_in_c4 = @install() fun test() {
            subtext(string("b? 10 [END]"));
        },
        dog_door_out_c3 = @install() fun test() {
            subtext(string("b? 11 [END]"));
        },
        dog_door_in_c3 = @install() fun test() {
            subtext(string("b? 12 [END]"));
        },
        dog_door_out_c2 = @install() fun test() {
            subtext(string("b? 13 [END]"));
        },
        dog_door_in_c2 = @install() fun test() {
            subtext(string("b? 14 [END]"));
        },
        dog_door_out_c1 = @install() fun test() {
            subtext(string("b? 15 [END]"));
        },
        dog_door_in_c1 = @install() fun test() {
            subtext(string("b? 16 [END]"));
        },
        dog_door_out_b1 = @install() fun test() {
            subtext(string("b? 17 [END]"));
        },
        dog_door_in_b1 = @install() fun test() {
            subtext(string("b? 18 [END]"));
        },
        dog_door_out_b2 = @install() fun test() {
            subtext(string("b? 19 [END]"));
        },

        dog_door_in_b2 = @install() fun test() {
            subtext(string("b? 20 [END]"));
        },
        dog_door_out_b3 = @install() fun test() {
            subtext(string("b? 21 [END]"));
        },
        dog_door_in_b3 = @install() fun test() {
            subtext(string("b? 22 [END]"));
        },
        dog_door_out_b4 = @install() fun test() {
            subtext(string("b? 23 [END]"));
        },
        dog_door_in_b4 = @install() fun test() {
            subtext(string("b? 24 [END]"));
        },
        dog_door_out_a4 = @install() fun test() {
            subtext(string("b? 25 [END]"));
        },
        dog_door_in_a4 = @install() fun test() {
            subtext(string("b? 26 [END]"));
        },
        dog_door_out_a3 = @install() fun test() {
            subtext(string("b? 27 [END]"));
        },
        dog_door_in_a3 = @install() fun test() {
            subtext(string("b? 28 [END]"));
        },
        dog_door_out_a2 = @install() fun test() {
            subtext(string("b? 29 [END]"));
        },

        dog_door_in_a2 = @install() fun test() {
            subtext(string("b? 30 [END]"));
        },
        dog_door_out_a1 = @install() fun test() {
            subtext(string("b? 31 [END]"));
        },
        dog_door_in_a1 = @install() fun test() {
            subtext(string("b? 32 [END]"));
        },
        door_d4 = @install() fun test() {
            subtext(string("b? 33 [END]"));
        },
        door_d3 = @install() fun test() {
            subtext(string("b? 34 [END]"));
        },
        door_b3 = @install() fun test() {
            subtext(string("b? 35 [END]"));
        },
        door_c4 = @install() fun test() {
            subtext(string("b? 36 [END]"));
        },
        door_b4 = @install() fun test() {
            subtext(string("b? 37 [END]"));
        },
        door_a4 = @install() fun test() {
            subtext(string("b? 38 [END]"));
        },
        door_a3 = @install() fun test() {
            subtext(string("b? 39 [END]"));
        },

        door_b2 = @install() fun test() {
            subtext(string("b? 40 [END]"));
        },
        door_a2 = @install() fun test() {
            subtext(string("b? 41 [END]"));
        },
        door_a1 = @install() fun test() {
            subtext(string("b? 42 [END]"));
        },
        door_d1 = @install() fun test() {
            subtext(string("b? 43 [END]"));
        },
        door_c1 = @install() fun test() {
            subtext(string("b? 44 [END]"));
        },
        door_c2 = @install() fun test() {
            subtext(string("b? 45 [END]"));
        },
        b_trigger_46 = @install() fun test() {
            subtext(string("b? 46 [END]"));
        },
        b_trigger_47 = @install() fun test() {
            subtext(string("b? 47 [END]"));
        },
        b_trigger_48 = @install() fun test() {
            subtext(string("b? 48 [END]"));
        },
        b_trigger_49 = @install() fun test() {
            subtext(string("b? 49 [END]"));
        },

        b_trigger_50 = @install() fun test() {
            subtext(string("b? 50 [END]"));
        },
        b_trigger_51 = @install() fun test() {
            subtext(string("b? 51 [END]"));
        },
        b_trigger_52 = @install() fun test() {
            subtext(string("b? 52 [END]"));
        },
    }
    
    fun trigger_enter() {
        fade_in();
    }
};

map face(0x45) {
    enum entrance {
        south = entrance(0x3a, 0x4e, DIRECTION.NONE)
    }

    enum stepon_trigger {
        exit_south = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        spawn_boss = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

map carltron(0x4a) {
    enum entrance {
        center = entrance(0x14, 0x25, DIRECTION.NONE)
    }

    enum stepon_trigger {
        stairs = @install() fun test() {
            subtext(string("exit? 0 [END]"));
        },
        fans = @install() fun test() {
            subtext(string("exit? 1 [END]"));
        }
    }

    enum b_trigger {
        b_trigger_0 = @install() fun test() {
            subtext(string("b? 0 [END]"));
        },
        b_trigger_1 = @install() fun test() {
            subtext(string("b? 1 [END]"));
        },
        b_trigger_2 = @install() fun test() {
            subtext(string("b? 2 [END]"));
        },
        b_trigger_3 = @install() fun test() {
            subtext(string("b? 3 [END]"));
        },
        b_trigger_4 = @install() fun test() {
            subtext(string("b? 4 [END]"));
        },
        b_trigger_5 = @install() fun test() {
            subtext(string("b? 5 [END]"));
        },
        b_trigger_6 = @install() fun test() {
            subtext(string("b? 6 [END]"));
        },
        b_trigger_7 = @install() fun test() {
            subtext(string("b? 7 [END]"));
        }
    }

    fun trigger_enter() {
        fade_in();
    }
};

// misc

map brians_room(MAP.BRIAN) {
    enum entrance {
        center = entrance(0x17, 0x19, DIRECTION.NONE)
    }

    fun trigger_enter() {
        fade_in();
    }
};